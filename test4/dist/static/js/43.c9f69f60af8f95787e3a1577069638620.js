webpackJsonp([43],{YWia:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),o=a("VU7F"),n=a("fYFQ"),l=a.n(n),c=(a("Kmkn"),{components:{Treeselect:l.a,processMessage:o.a},created:function(){"审核中"==this.$route.query.pageParams?this.formValidate.workFlowState=["2"]:"审核退回"==this.$route.query.pageParams&&(this.formValidate.workFlowState=["1"]);var t=this,e={applyTime:i()(this.formValidate.applyTime),extraUnit:i()(this.formValidate.extraUnit),status:i()(this.formValidate.workFlowState)};e=i()(e),this.axios.post("/extract/pageReview",e,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.cardArr2=e.data)}),this.axios.get("/extract/getExtractDic/EMERCRGENCY_LEVEL,EXTRACT_UNIT").then(function(e){"200"==e.code&&(t.emergeLevels=e.data.EMERCRGENCY_LEVEL,t.extraUnits=e.data.EXTRACT_UNIT)}).catch(function(t){}),this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(t.data1=e.data,t.selectTreeCleanUp(t.data1))}).catch(function(t){})},watch:{formValidate:{handler:function(t,e){var a=this,s={applyTime:i()(t.applyTime),extraUnit:i()(this.formValidate.extraUnit),status:i()(t.workFlowState)};s=i()(s),this.axios.post("/extract/pageReview",s,{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(a.cardArr2=t.data)})},deep:!0},"$store.state.firstLoginFlag":{handler:function(t){this.firstLoginFlag=t}}},data:function(){return{tabview:"processMessage",firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,compKey:"",dataObj:{},modelTitle:"流程详情",extraUnits:[{code:"10001",name:"分部门1"},{code:"10002",name:"分部门2"}],emergeLevels:[],workFlowStates:[{code:"0",name:"审核通过"},{code:"1",name:"审核退回"},{code:"2",name:"审核中"}],data1:[],formValidate:{applyTime:["",""],extraUnit:[],workFlowState:[]},cardArr2:[]}},methods:{cancel:function(){},verifyItem:function(t){var e=this,a=this.$store.state.menuBox;a.forEach(function(t,a){t.flag=!1,"审核任务"==t.name&&(t.flag=!0,e.storage.set("menuBoxIndex",a),e.$store.commit("menuBoxIndex",{menuBoxIndex:a}))}),this.storage.set("menuBox",a),this.$store.commit("menuBox",{menuBox:a}),this.storage.set("leftMenuBox",""),this.$store.commit("leftMenuBox",{leftMenuBox:""}),this.$router.push({name:"dataAuditExtrackApplyDetail/4",query:{documentId:t.documentId}})},selectTreeCleanUp:function(t){for(var e=0;e<t.length;e++)t[e].children&&t[e].children.length>0?this.selectTreeCleanUp(t[e].children):this.$delete(t[e],"children")},viewVerifyDetail:function(t,e){this.compKey=t.documentId,this.dataObj={documentId:t.documentId,name:"数据提取"},this.showModal=!0},getDisplayStatus:function(t){return"0"==t?"success":"2"==t?"process":"1"==t?"error":void 0},applyBtn:function(){this.$router.push({name:"dataExtractionApply"})},goDataExtractionApply:function(t,e){this.$router.push({name:"dataExtractionApply2",query:{batchId:t.batchId,menuCode:e,bpmName:t.bpmDefinitions[0].bpmName,disabledFlag:"1"==t.taskStatus,Id:"1"}})}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-extra-apply-window"},[a("div",{staticClass:"topTitle"},[a("span",{staticClass:"topTitle-span1"},[t._v("检查数据提取")]),t._v(" "),t._m(0),t._v(" "),a("span",{staticClass:"topTitle-span1"},[t._v("提取数据概览")]),t._v(" "),a("div",{staticClass:"button-content"},[t.firstLoginFlag?a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"107001001000"},expression:"{menuCode:'107001001000'}"}],attrs:{type:"primary"},on:{click:t.applyBtn}},[a("i"),t._v("立即申请\n      ")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"content1"},[a("div",{staticClass:"checked-content"},[a("span",{staticClass:"title"},[t._v("申请时间")]),t._v(" "),a("DatePicker",{attrs:{"split-panels":"",type:"daterange",placeholder:"请选择时间",value:t.formValidate.applyTime},on:{"on-change":function(e){t.formValidate.applyTime=e}}})],1),t._v(" "),a("div",{staticClass:"checked-content"},[a("span",{staticClass:"title"},[t._v("提取机构")]),t._v(" "),a("span",{staticStyle:{width:"300px",height:"auto","min-height":"40px",position:"relative",display:"inline-block"}},[a("treeselect",{staticStyle:{position:"absolute",top:"15px",left:"0px"},attrs:{valueConsistsOf:"ALL",limit:3,multiple:!0,options:t.data1,placeholder:""},model:{value:t.formValidate.extraUnit,callback:function(e){t.$set(t.formValidate,"extraUnit",e)},expression:"formValidate.extraUnit"}})],1)]),t._v(" "),a("div",{staticClass:"checked-content"},[a("span",{staticClass:"title"},[t._v("审核状态")]),t._v(" "),a("CheckboxGroup",{model:{value:t.formValidate.workFlowState,callback:function(e){t.$set(t.formValidate,"workFlowState",e)},expression:"formValidate.workFlowState"}},t._l(t.workFlowStates,function(e){return a("Checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}),1)],1)])]),t._v(" "),a("div",{staticClass:"contentCellBox cardBoxParent"},[t._m(1),t._v(" "),a("div",{staticClass:"contentCellBody"},t._l(t.cardArr2,function(e,s){return a("Row",{key:s},t._l(e,function(e,s){return a("div",{key:s,staticClass:"cardBox"},t._l(e,function(e){return a("div",{key:e.batchId,staticClass:"cardDiv"},[a("div",{staticClass:"cardDiv-title"},[t.firstLoginFlag?a("div",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"107001007000"},expression:"{menuCode:'107001007000'}"}],staticClass:"cardDiv-title-left",on:{click:function(a){return t.goDataExtractionApply(e,"107001007000")}}},[a("span",{staticClass:"textOverflow",staticStyle:{width:"200px"},attrs:{title:s}},[t._v(t._s(s))])]):t._e(),t._v(" "),a("div",{staticClass:"cardDiv-title-right"})]),t._v(" "),a("div",{staticClass:"cardDiv-body"},[a("div",{staticClass:"cardDiv-body-cell"},[a("div",{staticClass:"cardDiv-body-cellLeft"},[t._v("提取数据期间:")]),t._v(" "),a("div",{staticClass:"cardDiv-body-cellRight"},[t._v(t._s(e.extraTime)+"~"+t._s(e.extraTime2))])]),t._v(" "),a("div",{staticClass:"cardDiv-body-cell"},[a("div",{staticClass:"cardDiv-body-cellLeft"},[t._v("申请时间:")]),t._v(" "),a("div",{staticClass:"cardDiv-body-cellRight"},[t._v(t._s(e.applyTime.substr(0,19)))])]),t._v(" "),a("div",{staticClass:"cardDiv-body-cell"},[a("div",{staticClass:"cardDiv-body-cellLeft"},[t._v("提交截止日期:")]),t._v(" "),a("div",{staticClass:"cardDiv-body-cellRight"},[t._v(t._s(e.deadLine.substr(0,10)))])]),t._v(" "),a("div",{staticClass:"cardStep"},[a("el-steps",{attrs:{active:Number(e.workflowState)-1,"align-center":!0}},[t._l(e.bpmDefinitions,function(s,i){return[s.nodeId<e.workflowState?a("el-step",{key:s.id,attrs:{title:s.nodeName,status:"success"},nativeOn:{click:function(a){return t.viewVerifyDetail(e,s.nodeId)}}}):t._e(),t._v(" "),s.nodeId==e.workflowState?a("el-step",{key:s.id,attrs:{title:s.nodeName,status:t.getDisplayStatus(e.taskStatus)},nativeOn:{click:function(a){return t.viewVerifyDetail(e,s.nodeId)}}}):t._e(),t._v(" "),s.nodeId>e.workflowState?a("el-step",{key:s.id,attrs:{title:s.nodeName,status:"wait"}}):t._e()]})],2)],1),t._v(" "),a("div",{staticClass:"cardDiv-body-cell",staticStyle:{"justify-content":"center"}},[a("div",{staticClass:"cardDiv-body-cellLeft"},[t._v("处理人:")]),t._v(" "),a("div",{staticClass:"cardDiv-body-cellRight"},[t._v(t._s(e.names[e.names.length-1]))])])]),t._v(" "),a("div",{staticClass:"cardDiv-foot"},[a("div",{staticClass:"card-sts"},[t._l(t.emergeLevels,function(s){return[s.code==e.emergeLevel?a("p",[t._v(t._s(s.name))]):t._e()]})],2)])])}),0)}),0)}),1)]),t._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:t.modelTitle,styles:{width:"80%"}},on:{"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.showModal?a(t.tabview,{key:t.compKey,tag:"component",attrs:{dataObj:t.dataObj,width:"80%"}}):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"topTitle-span1"},[e("img",{attrs:{src:a("Dh6M"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contentCellTitle"},[e("div",{staticClass:"contentCellTitle-1"}),this._v("信息列表\n    ")])}]};var d=a("C7Lr")(c,r,!1,function(t){a("w/yK")},null,null);e.default=d.exports},"w/yK":function(t,e){}});
//# sourceMappingURL=43.c9f69f60af8f95787e3a1577069638620.js.map