webpackJsonp([118],{MJWl:function(e,t){},asYL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("3cXf"),l=a.n(o),n={created:function(){var e=this;this.axios.post("/process/getProcessType",{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(e.optionArr=t.data,console.log(e.optionArr))}).catch(function(e){}),this.tableList(this.pageNum,this.pageSize)},computed:{},watch:{modal1:function(e){0==e&&this.$refs.formValidateModel1.resetFields()},modal2:function(e){0==e&&this.$refs.formValidateModel2.resetFields()}},data:function(){return{mode2id:"",pageSize:10,total:0,pageNum:1,optionArr:[],modal2:!1,modalDisableFlag:!0,formValidateModel1:{name:"",val2:"",val3:"",val4:""},formValidateModel2:{name:"",val2:"",val3:"",val4:""},ruleValidateModel1:{name:[{required:!0,message:"请输入",trigger:"blur"},{max:10,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,validator:function(e,t,a){t||0==t?/^([1-9]\d*|[0]{1,1})$/.exec(t)?t.length>10?a("自定义顺序不能超过10个字"):a():a(new Error("自定义顺序请输入非负整数")):a("自定义顺序不能为空")},trigger:"blur"}],val4:[{max:40,message:"输入长度过长",trigger:"blur"}],val5:[{max:120,message:"输入长度过长",trigger:"blur"}]},modal1:!1,tableHeader:[{name:"序"},{name:"操作"},{name:"分类名称"},{name:"自定义顺序"},{name:"关键字"},{name:"分类描述"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}],tableBody:[{id:"",processType:"",content:"",parentType:"",keywords:"",typeDescribe:"",createTime:"",creator:"",upDateTime:"",updater:""},{id:"12",code:"eng_1",nameClass:"内控制度",customOrder:"1",fartherClass:"",classDis:"",createdTime:"2017-03-12 13:12:21",createdPeople:"admin",uploadTime:"2017-12-31 12:21:10",uploadPeople:"admin"}]}},methods:{resolvemenu:function(){var e=this,t=new FormData;t.append("menuCode",108001001e3),this.axios.post("/system/menu/getLeftMenuByMenuCode",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){"200"==t.code&&(e.storage.set("leftMenuBoxBody",t.data.listMenu),e.$store.commit("leftMenuBoxBody",{leftMenuBoxBody:t.data.listMenu}))})},download:function(e,t){if(e){var a=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.style.display="none",o.href=a,o.setAttribute("download",t),document.body.appendChild(o),o.click()}},exportFn:function(){var e=this,t={pageNum:this.pageNum,pageSize:this.pageSize};t=l()(t),this.axios.post("/process/getProcessTypeExcelList/"+this.pageNum+"/"+this.pageSize,t,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(t){e.download(t,"导出文档.xls")}).catch(function(e){})},pageNumFun:function(e){this.pageNum=e,this.tableList(e,this.pageSize)},pageSizeFun:function(e){this.pageSize=e,this.tableList(this.pageNum,e)},tableList:function(e,t){var a=this,o=e,l=t;this.axios.post("/process/getProcessTypeList/"+o+"/"+l).then(function(e){"200"==e.code&&(a.total=e.data.total,a.tableBody=e.data.records)}).catch(function(e){})},delItem:function(e){var t=this;this.$Modal.confirm({title:"是否删除？",okText:"确认",cancelText:"取消",onOk:function(){var a={id:e};a=l()(a),t.axios.post("/process/deleteProcessType",a,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.$Message.info("删除成功"),t.tableList(t.pageNum,t.pageSize))}).catch(function(e){})},onCancel:function(){}})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(a){if(a){var o={processType:t.formValidateModel1.name,content:t.formValidateModel1.val2,parentType:t.formValidateModel1.val3,keywords:t.formValidateModel1.val4,typeDescribe:t.formValidateModel1.val5};o=l()(o),t.axios.post("/process/addProcessType",o,{headers:{"Content-Type":"application/json"}}).then(function(a){"200"==a.code&&(t.$Message.info("保存成功"),t.$refs[e].resetFields(),t.modal1=!1,t.tableList(1,t.pageSize),t.resolvemenu())}).catch(function(e){})}})},handleSubmit2:function(e){var t=this;this.$refs[e].validate(function(a){if(a){var o={id:t.mode2id,processType:t.formValidateModel2.name,content:t.formValidateModel2.val2,parentType:"",keywords:t.formValidateModel2.val4,typeDescribe:t.formValidateModel2.val5};o=l()(o),t.axios.post("/process/updateProcessType",o,{headers:{"Content-Type":"application/json"}}).then(function(a){"200"==a.code&&(t.$Message.info("修改成功"),t.$refs[e].resetFields(),t.modal2=!1,t.resolvemenu())}).catch(function(e){})}})},watchfun:function(){this.$router.push({name:"dataExtractionApplyDetail"})},addfun:function(e){this.modalDisableFlag=!1,this.modal1=!0},modify:function(e){this.modalDisableFlag=!0,this.modal1=!0},rolefun:function(e){var t=this,a=e;this.mode2id=e,this.axios.post("/process/getProcessTypeRow/"+a).then(function(e){"200"==e.code&&(t.formValidateModel2.name=e.data.processType,t.formValidateModel2.val2=e.data.content,t.formValidateModel2.val3=e.data.parentType,t.formValidateModel2.val4=e.data.keywords,t.formValidateModel2.val5=e.data.typeDescribe)}).catch(function(e){}),this.modal2=!0}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"topTitle"},[a("span",{staticClass:"topTitle-span1"},[e._v("过程管理")]),e._v(" "),e._m(0),e._v(" "),a("span",{staticClass:"topTitle-span1"},[e._v("过程分类")]),e._v(" "),a("div",{staticClass:"button-content"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addfun(0)}}},[a("i",{staticClass:"ivu-icon ivu-icon-md-add"}),e._v("新增\n      ")]),e._v(" "),a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001001005"},expression:"{menuCode:'108001001005'}"}],attrs:{type:"primary"},on:{click:e.exportFn}},[a("i",{staticClass:"ivu-icon ivu-icon-md-arrow-up"}),e._v("导出\n      ")])],1)]),e._v(" "),a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellBox"},[e._m(1),e._v(" "),a("div",{staticClass:"contentCellBody"},[a("Row",[a("table",{staticClass:"tableBox"},[a("thead",[a("tr",e._l(e.tableHeader,function(t,o){return a("td",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("tbody",[e._l(e.tableBody,function(t,o){return[a("tr",[a("td",[e._v(e._s(e.pageSize*(e.pageNum-1)+o+1))]),e._v(" "),a("td",[a("span",{staticClass:"spanBox",on:{click:function(a){return e.rolefun(t.id)}}},[e._v("修改")]),e._v(" "),1*t.id>15?a("span",{staticClass:"spanBox",on:{click:function(a){return e.delItem(t.id)}}},[e._v("删除")]):e._e()]),e._v(" "),a("td",[e._v(e._s(t.processType))]),e._v(" "),a("td",[e._v(e._s(t.content))]),e._v(" "),a("td",[e._v(e._s(t.keywords))]),e._v(" "),a("td",[e._v(e._s(t.typeDescribe))]),e._v(" "),a("td",[e._v(e._s(t.createTime))]),e._v(" "),a("td",[e._v(e._s(t.creator))]),e._v(" "),a("td",[e._v(e._s(t.upDateTime))]),e._v(" "),a("td",[e._v(e._s(t.updater))])])]})],2)])]),e._v(" "),a("div",{staticClass:"flexCenter pageBox"},[a("Page",{attrs:{total:e.total,current:e.pageNum,"show-elevator":"","show-sizer":""},on:{"update:current":function(t){e.pageNum=t},"on-change":e.pageNumFun,"on-page-size-change":e.pageSizeFun}})],1)],1)])]),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,width:"1000",title:"新增"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("div",[a("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidateModel1,"label-width":100}},[a("FormItem",{attrs:{label:"分类名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.formValidateModel1.name,callback:function(t){e.$set(e.formValidateModel1,"name",t)},expression:"formValidateModel1.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"自定义顺序",prop:"val2"}},[a("Input",{attrs:{placeholder:"请输入自定义顺序"},model:{value:e.formValidateModel1.val2,callback:function(t){e.$set(e.formValidateModel1,"val2",t)},expression:"formValidateModel1.val2"}})],1),e._v(" "),a("FormItem",{attrs:{label:"父分类",prop:"val3"}},[a("Select",{attrs:{placeholder:"请选择"},model:{value:e.formValidateModel1.val3,callback:function(t){e.$set(e.formValidateModel1,"val3",t)},expression:"formValidateModel1.val3"}},[a("Option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.optionArr,function(t,o){return a("Option",{key:o,attrs:{value:t}},[e._v(e._s(t))])})],2)],1),e._v(" "),a("FormItem",{attrs:{label:"关键字",prop:"val4"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formValidateModel1.val4,callback:function(t){e.$set(e.formValidateModel1,"val4",t)},expression:"formValidateModel1.val4"}})],1),e._v(" "),a("FormItem",{attrs:{label:"分类描述",prop:"val5"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formValidateModel1.val5,callback:function(t){e.$set(e.formValidateModel1,"val5",t)},expression:"formValidateModel1.val5"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"button-content"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidateModel1")}}},[e._v("保存")]),e._v(" "),a("Button",{on:{click:function(t){e.modal1=!1}}},[e._v("取消")])],1)])]),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,width:"1000",title:"修改"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("div",[a("Form",{ref:"formValidateModel2",attrs:{model:e.formValidateModel2,rules:e.ruleValidateModel1,"label-width":100}},[a("FormItem",{attrs:{label:"分类名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入分类名称",disabled:""},model:{value:e.formValidateModel2.name,callback:function(t){e.$set(e.formValidateModel2,"name",t)},expression:"formValidateModel2.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"自定义顺序",prop:"val2"}},[a("Input",{attrs:{placeholder:"请输入自定义顺序"},model:{value:e.formValidateModel2.val2,callback:function(t){e.$set(e.formValidateModel2,"val2",t)},expression:"formValidateModel2.val2"}})],1),e._v(" "),a("FormItem",{attrs:{label:"关键字",prop:"val4"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formValidateModel2.val4,callback:function(t){e.$set(e.formValidateModel2,"val4",t)},expression:"formValidateModel2.val4"}})],1),e._v(" "),a("FormItem",{attrs:{label:"分类描述",prop:"val5"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formValidateModel2.val5,callback:function(t){e.$set(e.formValidateModel2,"val5",t)},expression:"formValidateModel2.val5"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"button-content"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit2("formValidateModel2")}}},[e._v("保存")]),e._v(" "),a("Button",{on:{click:function(t){e.modal2=!1}}},[e._v("取消")])],1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"topTitle-span1"},[t("img",{attrs:{src:a("Dh6M"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"contentCellTitle"},[t("div",{staticClass:"contentCellTitle-1"}),this._v("数据列表\n        ")])}]};var s=a("C7Lr")(n,i,!1,function(e){a("MJWl")},"data-v-1d5ae214",null);t.default=s.exports}});
//# sourceMappingURL=118.79b1c4cf3612da697ef31577069638620.js.map