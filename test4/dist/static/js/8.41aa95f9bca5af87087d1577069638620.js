webpackJsonp([8],{"2qwu":function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"risk-level-detail"},[this._v("\n    "+this._s(this.dataObj.data.controlMeasure)+"\n")])},staticRenderFns:[]};var l=a("C7Lr")({props:["dataObj"],mounted:function(){}},s,!1,function(e){a("f2rl")},"data-v-61f9c9e5",null);t.a=l.exports},PI9Q:function(e,t){},QKbG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),l=a.n(s),i={props:["dataObj"],created:function(){this.dataObj.data&&(this.formValidate=JSON.parse(l()(this.dataObj.data)),this.newItem=!1),this.typeNm=this.dataObj.typeNm},data:function(){var e=this;return{formValidate:{levelCode:"",remark:"",levelName:"",minValue:"",maxValue:"",evalCycle:"",controlMeasure:""},newItem:!0,typeNm:"",ruleValidate:{levelCode:[{required:!0,message:"等级代码不能为空！",trigger:"blur"},{type:"string",max:32,message:"等级代码不能超过32个字！",trigger:"blur"},{validator:function(t,a,s){var l="业务"==e.typeNm?"/model/business/isHaveBusRiskLevel/"+a:"/model/product/isHaveProRiskLevel/"+a;e.newItem?e.axios.get(l).then(function(e){"false"==e.data?s(new Error("产品代码已存在")):s()}).catch(function(e){}):s()},trigger:"xxxx"}],levelName:[{required:!0,message:"等级名称不能为空！",trigger:"blur"},{type:"string",max:128,message:"等级名称不能超过128个字！",trigger:"blur"}],minValue:[{required:!0,validator:function(t,a,s){var l=/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/,i=e.formValidate.maxValue;a||0==a?l.exec(a)?l.exec(i)&&parseFloat(i)<parseFloat(a)?s("下限分值不能大于上限分值"):parseFloat(a)>999.99?s("下限分值不能大于999.99"):s():s(new Error("下限分值请输入非负数")):s("下限分值不能为空")},trigger:"blur"}],maxValue:[{required:!0,validator:function(t,a,s){var l=/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/,i=e.formValidate.minValue;a||0==a?l.exec(a)?l.exec(i)&&parseFloat(i)>parseFloat(a)?s("下限分值不能大于上限分值"):parseFloat(a)>999.99?s("上限分值不能大于999.99"):s():s(new Error("上限分值请输入非负数")):s("上限分值不能为空")},trigger:"blur"}],evalCycle:[{pattern:/^[1-9]+[0-9]*$/,message:"请输入正整数",trigger:"blur"},{validator:function(e,t,a){t&&parseInt(t)>1e3?a("最大不能超过1000"):a()},trigger:"blur"}],remark:[{type:"string",max:512,message:"备注不能超过512个字！",trigger:"blur"}],controlMeasure:[{type:"string",max:512,message:"控制措施不能超过512个字！",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this,a=l()(this.formValidate),s="";s="业务"==this.typeNm?1==this.newItem?"/model/business/saveBusRiskLevel":"/model/business/updateProRiskLevel":1==this.newItem?"/model/product/saveProRiskLevel":"/model/product/updateProRiskLevel",this.$refs[e].validate(function(e){e&&t.axios.post(s,a,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.$Message.success("保存成功"),t.$emit("save"))}).catch(function(e){})})},handleCancel:function(e){this.$emit("cancel",!1)}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-risk-level"},[a("Form",{ref:"formValidate",staticClass:"form-content",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":150}},[a("FormItem",{attrs:{label:"等级代码",prop:"levelCode"}},[a("Input",{attrs:{placeholder:"请输入等级代码",disabled:!e.newItem},model:{value:e.formValidate.levelCode,callback:function(t){e.$set(e.formValidate,"levelCode",t)},expression:"formValidate.levelCode"}})],1),e._v(" "),a("FormItem",{attrs:{label:"等级名称",prop:"levelName"}},[a("Input",{attrs:{placeholder:"请输入等级名称"},model:{value:e.formValidate.levelName,callback:function(t){e.$set(e.formValidate,"levelName",t)},expression:"formValidate.levelName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"下限分值",prop:"minValue"}},[a("Input",{attrs:{placeholder:"请输入下限分值"},model:{value:e.formValidate.minValue,callback:function(t){e.$set(e.formValidate,"minValue",t)},expression:"formValidate.minValue"}})],1),e._v(" "),a("FormItem",{attrs:{label:"上限分值",prop:"maxValue"}},[a("Input",{attrs:{placeholder:"请输入上限分值"},model:{value:e.formValidate.maxValue,callback:function(t){e.$set(e.formValidate,"maxValue",t)},expression:"formValidate.maxValue"}})],1),e._v(" "),a("FormItem",{attrs:{label:"评定周期（月）",prop:"evalCycle"}},[a("Input",{attrs:{placeholder:"请输入评定周期（月）"},model:{value:e.formValidate.evalCycle,callback:function(t){e.$set(e.formValidate,"evalCycle",t)},expression:"formValidate.evalCycle"}})],1),e._v(" "),a("FormItem",{attrs:{label:"控制措施",prop:"controlMeasure"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入业务描述"},model:{value:e.formValidate.controlMeasure,callback:function(t){e.$set(e.formValidate,"controlMeasure",t)},expression:"formValidate.controlMeasure"}})],1),e._v(" "),a("FormItem",[a("div",{staticClass:"button-content"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),a("Button",{on:{click:e.handleCancel}},[e._v("取消")])],1)])],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(i,o,!1,function(e){a("PI9Q")},null,null).exports,n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"history-detail"},[a("div",{staticClass:"content"},[a("div",{staticClass:"left"},[a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"操作时间"}},[a("label",[e._v(e._s(e.arr1.updateTime))])]),e._v(" "),a("FormItem",{attrs:{label:"等级代码"}},[a("label",{class:e.fields.indexOf("levelCode")>-1?"red":""},[e._v(e._s(e.arr1.levelCode))])]),e._v(" "),a("FormItem",{attrs:{label:"等级名称"}},[a("label",{class:e.fields.indexOf("levelName")>-1?"red":""},[e._v(e._s(e.arr1.levelName))])]),e._v(" "),a("FormItem",{attrs:{label:"下限分值"}},[a("label",{class:e.fields.indexOf("minValue")>-1?"red":""},[e._v(e._s(e.arr1.minValue))])]),e._v(" "),a("FormItem",{attrs:{label:"上限分值"}},[a("label",{class:e.fields.indexOf("maxValue")>-1?"red":""},[e._v(e._s(e.arr1.maxValue))])]),e._v(" "),a("FormItem",{attrs:{label:"评定周期（月）"}},[a("label",{class:e.fields.indexOf("evalCycle")>-1?"red":""},[e._v(e._s(e.arr1.evalCycle))])]),e._v(" "),a("FormItem",{attrs:{label:"控制措施"}},[a("label",{class:e.fields.indexOf("controlMeasure")>-1?"red":""},[e._v(e._s(e.arr1.controlMeasure))])])],1)],1),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("div",{staticClass:"right"},[a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"操作时间"}},[a("label",[e._v(e._s(e.arr2.updateTime))])]),e._v(" "),a("FormItem",{attrs:{label:"等级代码"}},[a("label",{class:e.fields.indexOf("levelCode")>-1?"red":""},[e._v(e._s(e.arr2.levelCode))])]),e._v(" "),a("FormItem",{attrs:{label:"等级名称"}},[a("label",{class:e.fields.indexOf("levelName")>-1?"red":""},[e._v(e._s(e.arr2.levelName))])]),e._v(" "),a("FormItem",{attrs:{label:"下限分值"}},[a("label",{class:e.fields.indexOf("minValue")>-1?"red":""},[e._v(e._s(e.arr2.minValue))])]),e._v(" "),a("FormItem",{attrs:{label:"上限分值"}},[a("label",{class:e.fields.indexOf("maxValue")>-1?"red":""},[e._v(e._s(e.arr2.maxValue))])]),e._v(" "),a("FormItem",{attrs:{label:"评定周期（月）"}},[a("label",{class:e.fields.indexOf("evalCycle")>-1?"red":""},[e._v(e._s(e.arr2.evalCycle))])]),e._v(" "),a("FormItem",{attrs:{label:"控制措施"}},[a("label",{class:e.fields.indexOf("controlMeasure")>-1?"red":""},[e._v(e._s(e.arr2.controlMeasure))])])],1)],1)])])},staticRenderFns:[]};var d={props:["dataObj"],created:function(){var e=this;this.selectUrl="业务"==this.dataObj.typeNm?"/model/business/getBusRiskLevelHis":"/model/proRiskLevelHis/getProRiskLevelHis";var t={pageSize:this.pageSize,pageNum:this.pageNum};t=l()(t),this.axios.post(this.selectUrl,t,{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(e.rowCount=t.data.total,e.tableBody=t.data.records)}).catch(function(e){})},data:function(){return{showHistoryModal:!1,id:"",pageNum:1,selectUrl:"",rowCount:0,pageSize:10,modelTitle:"详情",tabview:"historyDetail",tableHeader1:[{name:"序"},{name:"部门"},{name:"更新时间"},{name:"更新人员"},{name:"更新内容"}],tableBody:[]}},components:{historyDetail:a("C7Lr")({props:["id","typeNm"],created:function(){var e=this,t="业务"==this.typeNm?"/model/business/getBusRiskLevelHis":"/model/proRiskLevelHis/getProRiskLevelHis";this.axios.get(t+"/"+this.id).then(function(t){"200"==t.code&&(t.data.records.length>1?(e.arr1=t.data.records[0],e.arr2=t.data.records[1]):t.data.records.length>0&&(e.arr1=t.data.records[0]),e.fields=t.data.fields)}).catch(function(e){})},data:function(){return{arr1:[],arr2:[],fields:[]}}},n,!1,function(e){a("j64n")},null,null).exports},methods:{shhowHistory:function(e){this.showHistoryModal=!0,this.id=e},exportFn:function(){var e=this,t={pageSize:this.pageSize,pageNum:this.pageNum},a="业务"==this.dataObj.typeNm?"/model/business/doExportBusRiskLevelHis":"/model/proRiskLevelHis/doExportProRiskLevelHis";this.axios.post(a,t,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(t){e.download(t,"导出文档.xls")}).catch(function(e){})},download:function(e,t){if(e){var a=window.URL.createObjectURL(new Blob([e])),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click()}},pageChange:function(e){var t=this;this.pageNum=1*e;var a={pageSize:this.pageSize,pageNum:this.pageNum};a=l()(a),this.axios.post(this.selectUrl,a,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.rowCount=e.data.total,t.tableBody=e.data.records)}).catch(function(e){})},pageSizefun:function(e){this.pageSize=1*e,1==this.pageNum&&this.pageChange(1)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"history"},[a("Row",{staticStyle:{"padding-bottom":"20px"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.exportFn}},[a("i",{staticClass:"ivu-icon ivu-icon-md-arrow-up"}),e._v("导出\n        ")])],1),e._v(" "),a("table",{staticClass:"tableBox",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",e._l(e.tableHeader1,function(t,s){return a("td",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("tbody",e._l(e.tableBody,function(t,s){return a("tr",[a("td",[e._v(e._s(e.pageSize*(e.pageNum-1)+s+1))]),e._v(" "),a("td",[e._v(e._s(t.dpname))]),e._v(" "),a("td",[e._v(e._s(t.updateTime))]),e._v(" "),a("td",[e._v(e._s("业务"==e.dataObj.typeNm?t.username:t.updater))]),e._v(" "),a("td",{staticClass:"show-detail",on:{click:function(a){return e.shhowHistory(t.id)}}},[e._v("详情")])])}),0)]),e._v(" "),a("div",{staticClass:"flexCenter pageBox"},[a("Page",{attrs:{current:e.pageNum,total:e.rowCount,"page-size":e.pageSize,"show-elevator":"","show-sizer":""},on:{"update:current":function(t){e.pageNum=t},"on-change":e.pageChange,"on-page-size-change":e.pageSizefun}})],1),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:e.modelTitle,styles:{width:"40%"}},model:{value:e.showHistoryModal,callback:function(t){e.showHistoryModal=t},expression:"showHistoryModal"}},[e.showHistoryModal?a(e.tabview,{tag:"component",attrs:{width:"40%",id:e.id,typeNm:e.dataObj.typeNm}}):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(d,c,!1,function(e){a("tk7q")},null,null).exports,m={components:{addRiskLevel:r,riskLevelDetail:a("2qwu").a,history:u},data:function(){return{tabview:"addRiskLevel",showAddModal:!1,dataObj:{data:{}},selectUrl:"",deleteUrl:"",modelTitle:"新增",typeNm:"业务",tableHeader:[{name:"序"},{name:"操作"},{name:"等级代码"},{name:"等级名称"},{name:"下限分值"},{name:"上限分值"},{name:"评定周期（月）"},{name:"控制措施"}],tableBody:[]}},mounted:function(){},methods:{cancel:function(){},operate:function(e,t){var a=this;switch(e){case"1":this.modelTitle="新增",this.tabview="addRiskLevel",this.showAddModal=!0,this.dataObj={typeNm:this.typeNm};break;case"2":this.modelTitle="修改",this.dataObj={typeNm:this.typeNm,data:t},this.tabview="addRiskLevel",this.showAddModal=!0;break;case"3":this.$Modal.confirm({title:"是否删除？",okText:"确认",cancelText:"取消",onOk:function(){a.axios.get(a.deleteUrl+"/"+t.id).then(function(e){"200"==e.code&&(a.$Message.success("操作成功"),a.axios.get(a.selectUrl).then(function(e){"200"==e.code&&(a.tableBody=e.data)}).catch(function(e){}))}).catch(function(e){})},onCancel:function(){}});break;case"4":this.modelTitle="控制措施详情",this.tabview="riskLevelDetail",this.dataObj={data:t},this.showAddModal=!0;break;case"5":this.modelTitle="历史详情",this.dataObj={typeNm:this.typeNm},this.tabview="history",this.showAddModal=!0}},exportFn:function(){var e=this,t="业务"==this.typeNm?"/model/business/doExportBusRiskLevel":"/model/product/doExportProRiskLevel";this.axios.get(t,{responseType:"blob"}).then(function(t){e.download(t,"导出文档.xls")}).catch(function(e){})},download:function(e,t){if(e){var a=window.URL.createObjectURL(new Blob([e])),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click()}},saveDatas:function(){var e=this;this.showAddModal=!1,this.axios.get(this.selectUrl).then(function(t){"200"==t.code&&(e.tableBody=t.data)}).catch(function(e){})},cancelDialog:function(e){this.showAddModal=e}},watch:{$route:{handler:function(e,t){var a=this;1==this.$route.params.type?(this.typeNm="业务",this.selectUrl="/model/business/getBusRiskLevelView",this.deleteUrl="/model/business/deleteBusRiskLevel"):(this.typeNm="产品",this.selectUrl="/model/product/selectProRiskLevel",this.deleteUrl="/model/product/delProRiskLevel"),this.axios.get(this.selectUrl).then(function(e){"200"==e.code&&(a.tableBody=e.data)}).catch(function(e){})},immediate:!0}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"risk-level-set"},[a("div",{staticClass:"topTitle"},[a("span",{staticClass:"topTitle-span1"},[e._v("模型管理")]),e._v(" "),e._m(0),e._v(" "),a("span",{staticClass:"topTitle-span1"},[e._v(e._s(e.typeNm)+"洗钱风险模型管理")]),e._v(" "),e._m(1),e._v(" "),a("span",{staticClass:"topTitle-span1"},[e._v("风险等级设置")])]),e._v(" "),a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),e._v("数据列表\n        "),a("div",{staticClass:"button-content"},[a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"业务"==e.typeNm?"111001001001":"111002001001"},expression:"{menuCode:typeNm == '业务'?'111001001001':'111002001001'}"}],attrs:{type:"primary"},on:{click:function(t){return e.operate("1")}}},[a("i",{staticClass:"ivu-icon ivu-icon-md-add"}),e._v("新增\n          ")]),e._v(" "),a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"业务"==e.typeNm?"111001001004":"111002001004"},expression:"{menuCode:typeNm == '业务'?'111001001004':'111002001004'}"}],attrs:{type:"primary"},on:{click:function(t){return e.operate("5")}}},[a("Icon",{attrs:{type:"ios-alarm-outline"}}),e._v("历史\n          ")],1),e._v(" "),a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"业务"==e.typeNm?"111001001005":"111002001005"},expression:"{menuCode:typeNm == '业务'?'111001001005':'111002001005'}"}],attrs:{type:"primary"},on:{click:e.exportFn}},[a("i",{staticClass:"ivu-icon ivu-icon-md-arrow-up"}),e._v("导出\n          ")])],1)]),e._v(" "),a("div",{staticClass:"contentCellBody"},[a("Row",[a("table",{staticClass:"tableBox"},[a("thead",[a("tr",e._l(e.tableHeader,function(t,s){return a("td",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("tbody",[e._l(e.tableBody,function(t,s){return[a("tr",[a("td",[e._v(e._s(s+1))]),e._v(" "),a("td",[a("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"业务"==e.typeNm?"111001001002":"111002001002"},expression:"{menuCode:typeNm == '业务'?'111001001002':'111002001002'}"}],staticClass:"spanBox",on:{click:function(a){return e.operate("2",t)}}},[e._v("修改")]),e._v(" "),a("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"业务"==e.typeNm?"111001001003":"111002001003"},expression:"{menuCode:typeNm == '业务'?'111001001003':'111002001003'}"}],staticClass:"spanBox",on:{click:function(a){return e.operate("3",t)}}},[e._v("删除")])]),e._v(" "),a("td",[e._v(e._s(t.levelCode))]),e._v(" "),a("td",[e._v(e._s(t.levelName))]),e._v(" "),a("td",[e._v(e._s(t.minValue))]),e._v(" "),a("td",[e._v(e._s(t.maxValue))]),e._v(" "),a("td",[e._v(e._s(t.evalCycle))]),e._v(" "),a("td",[a("span",{staticClass:"spanBox",on:{click:function(a){return e.operate("4",t)}}},[e._v("详情")])])])]})],2)])])],1)])]),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:e.modelTitle,styles:{width:"60%"}},on:{"on-cancel":e.cancel},model:{value:e.showAddModal,callback:function(t){e.showAddModal=t},expression:"showAddModal"}},[e.showAddModal?a(e.tabview,{tag:"component",attrs:{dataObj:e.dataObj,width:"80%"},on:{cancel:e.cancelDialog,save:e.saveDatas}}):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"topTitle-span1"},[t("img",{attrs:{src:a("Dh6M"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"topTitle-span1"},[t("img",{attrs:{src:a("Dh6M"),alt:""}})])}]};var p=a("C7Lr")(m,v,!1,function(e){a("RyrI")},"data-v-8edbe518",null);t.default=p.exports},RyrI:function(e,t){},f2rl:function(e,t){},j64n:function(e,t){},tk7q:function(e,t){}});
//# sourceMappingURL=8.41aa95f9bca5af87087d1577069638620.js.map