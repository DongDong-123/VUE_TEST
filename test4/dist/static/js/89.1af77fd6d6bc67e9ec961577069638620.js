webpackJsonp([89],{"3kUF":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3cXf"),n=a.n(o),i=a("fYFQ"),s=a.n(i),l=a("VU7F"),r=(a("Kmkn"),{components:{Treeselect:s.a,processMessage:l.a},created:function(){var t=this,e=JSON.parse(n()(this.formValidate));e.applyTime=n()(e.applyTime),e.extraUnit=n()(e.extraUnit),e.workFlowState=n()(e.workFlowState),e.emergeLevel=n()(e.emergeLevel),e=n()(e),this.axios.post("/extract/showRecordInfo",e,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.rowCount=e.data.total,t.tableBody=e.data.records)}).catch(function(t){}),this.axios.get("/extract/getExtractDic/EMERCRGENCY_LEVEL").then(function(e){"200"==e.code&&(t.emergeLevels=e.data.EMERCRGENCY_LEVEL)}).catch(function(t){}),this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(t.data1=e.data,t.selectTreeCleanUp(t.data1))}).catch(function(t){})},data:function(){return{showModal:!1,rowCount:0,modal1:!1,dataObj:{businessId:"",name:""},fileList:[],tableHeader:[{name:"序"},{name:"提取机构"},{name:"提取数据期间"},{name:"提交截止日期"},{name:"权限使用时间"},{name:"紧急程度"},{name:"附件"},{name:"审核状态"},{name:"申请时间"},{name:"申请人"},{name:"申请人所属部门"},{name:"审核完成时间"},{name:"操作"},{name:"下载记录"}],tableBody:[],emergeLevels:[],workFlowStates:[{code:"0",name:"审核通过"},{code:"1",name:"审核退回"},{code:"2",name:"审核中"}],data1:[],formValidate:{applyTime:["",""],extraUnit:[],workFlowState:[],emergeLevel:[],flag:"1",pageSize:10,pageNo:1}}},methods:{showProcess:function(t){this.dataObj={businessId:t.batchId,name:"检查数据提取"},this.showModal=!0},handleSubmit:function(t){var e=this;this.formValidate.flag=t,this.formValidate.pageNo=1;var a=JSON.parse(n()(this.formValidate));a.applyTime=n()(a.applyTime),a.extraUnit=n()(a.extraUnit),a.workFlowState=n()(a.workFlowState),a.emergeLevel=n()(a.emergeLevel),a=n()(a),this.axios.post("/extract/showRecordInfo",a,{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(e.rowCount=t.data.total,e.tableBody=t.data.records)}).catch(function(t){})},selectTreeCleanUp:function(t){for(var e=0;e<t.length;e++)t[e].children&&t[e].children.length>0?this.selectTreeCleanUp(t[e].children):this.$delete(t[e],"children")},fileDownload:function(t,e){var a=this,o=n()({token:"",fileId:t});this.axios.post("/system/remote/micDownLoad",o,{headers:{"Content-Type":"application/json"}}).then(function(t){var o=n()({url:t.message,fileName:e});a.axios.post("/system/remote/getFileInfo",o,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(t){a.download(t,e)}).catch(function(t){})}).catch(function(t){})},download:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t])),o=document.createElement("a");o.style.display="none",o.href=a,o.setAttribute("download",e),document.body.appendChild(o),o.click()}},watchFiles:function(t){var e=this;this.axios.post("/system/remote/getFileList/"+t).then(function(t){"200"==t.code&&(e.fileList=t.data,e.modal1=!0)}).catch(function(t){})},pageSizefun:function(t){this.formValidate.pageSize=t,1==this.formValidate.pageNo&&this.pageChange(1)},pageChange:function(t){var e=this;this.formValidate.pageNo=t;var a=JSON.parse(n()(this.formValidate));a.applyTime=n()(a.applyTime),a.extraUnit=n()(a.extraUnit),a.workFlowState=n()(a.workFlowState),a.emergeLevel=n()(a.emergeLevel),a=n()(a),this.axios.post("/extract/showRecordInfo",a,{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(e.rowCount=t.data.total,e.tableBody=t.data.records)}).catch(function(t){})},logDetail:function(t){this.$router.push({name:"optionLog",query:{menuCode:"112006000000",optUser:t.extraApplicant,optDesc:"63号文数据文件"}})},watchfun:function(t){this.$router.push({name:"dataExtractionApply2",query:{menuCode:"107003000100",batchId:t.batchId,Id:"12",disabledFlag:"1"==t.taskStatus}})}}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellBox"},[t._m(1),t._v(" "),a("div",{staticClass:"contentCellBody1"},[a("Form",{attrs:{model:t.formValidate,"label-width":120,inline:""}},[a("Row",[a("FormItem",{attrs:{label:"申请时间："}},[a("DatePicker",{attrs:{"split-panels":"",type:"daterange",placeholder:"请选择时间",value:t.formValidate.applyTime},on:{"on-change":function(e){t.formValidate.applyTime=e}}})],1),t._v(" "),a("FormItem",{attrs:{label:"提取机构：",prop:"emergeLevel"}},[a("treeselect",{staticStyle:{width:"300px"},attrs:{valueConsistsOf:"ALL",limit:3,multiple:!0,options:t.data1,placeholder:"请选择"},model:{value:t.formValidate.extraUnit,callback:function(e){t.$set(t.formValidate,"extraUnit",e)},expression:"formValidate.extraUnit"}})],1),t._v(" "),a("FormItem",{attrs:{label:"审核状态："}},[a("CheckboxGroup",{model:{value:t.formValidate.workFlowState,callback:function(e){t.$set(t.formValidate,"workFlowState",e)},expression:"formValidate.workFlowState"}},t._l(t.workFlowStates,function(e){return a("Checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("Row",[a("FormItem",{attrs:{label:"紧急程度："}},[a("CheckboxGroup",{model:{value:t.formValidate.emergeLevel,callback:function(e){t.$set(t.formValidate,"emergeLevel",e)},expression:"formValidate.emergeLevel"}},t._l(t.emergeLevels,function(e){return a("Checkbox",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("Row",[a("div",{staticClass:"btnClass"},[a("Button",{staticStyle:{width:"89px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("1")}}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("2")}}},[t._v("精确查询")])],1)])],1)],1)]),t._v(" "),a("div",{staticClass:"contentCellBox"},[t._m(2),t._v(" "),a("div",{staticClass:"contentCellBody"},[a("Row",[a("table",{staticClass:"tableBox"},[a("thead",[a("tr",t._l(t.tableHeader,function(e){return a("td",{key:e.name},[t._v(t._s(e.name))])}),0)]),t._v(" "),a("tbody",t._l(t.tableBody,function(e,o){return a("tr",{key:e.id},[a("td",[t._v("\n                 "+t._s(t.formValidate.pageSize*(t.formValidate.pageNo-1)+o+1)+"\n                ")]),t._v(" "),a("td",[a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.extraUnit}},[a("span",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.extraUnit))])])],1),t._v(" "),a("td",[t._v(t._s(e.extraTime)+"~"+t._s(e.extraTime2))]),t._v(" "),a("td",[t._v(t._s(e.deadLine?e.deadLine.substr(0,10):""))]),t._v(" "),a("td",[t._v(t._s(e.permissionTime?e.permissionTime.substr(0,10):"")+"~"+t._s(e.permissionTime2?e.permissionTime2.substr(0,10):""))]),t._v(" "),a("td",[t._v(t._s(e.emergeLevel))]),t._v(" "),a("td",[a("span",{staticClass:"operationSpan view",on:{click:function(a){return t.watchFiles(e.batchId)}}},[t._v("查看")])]),t._v(" "),a("td",[t._v(t._s(e.state))]),t._v(" "),a("td",[t._v(t._s(e.applyTime.substr(0,19)))]),t._v(" "),a("td",[t._v(t._s(e.extraApplicant))]),t._v(" "),a("td",[a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.extraApplicantUnit}},[a("span",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.extraApplicantUnit))])])],1),t._v(" "),a("td",[t._v(t._s(e.endTime?e.endTime.substr(0,19):""))]),t._v(" "),a("td",{staticStyle:{width:"100px"}},[a("span",{staticClass:"operationSpan",on:{click:function(a){return t.watchfun(e)}}},[t._v("申请详情")]),t._v(" "),a("span",{staticClass:"operationSpan",on:{click:function(a){return t.showProcess(e)}}},[t._v("流程详情")])]),t._v(" "),a("td",{staticStyle:{"min-width":"100px"}},[a("span",{staticClass:"operationSpan",on:{click:function(a){return t.logDetail(e)}}},[t._v("日志详情")])])])}),0)])]),t._v(" "),a("div",{staticClass:"flexCenter pageBox"},[a("Page",{attrs:{current:t.formValidate.pageNo,total:t.rowCount,"page-size":t.formValidate.pageSize,"show-elevator":"","show-sizer":""},on:{"update:current":function(e){return t.$set(t.formValidate,"pageNo",e)},"on-change":t.pageChange,"on-page-size-change":t.pageSizefun}})],1)],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,title:"文件列表"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("div",{staticClass:"fujian"},[a("div",{staticClass:"fujian-title"},[t._v("附件:")]),t._v(" "),t._l(t.fileList,function(e,o){return a("div",{key:o},[a("span",{staticClass:"cursorPointer",staticStyle:{width:"100%",height:"40px","line-height":"20px",overflow:"hidden","text-overflow":"ellipsis","margin-bottom":"5px"},on:{click:function(a){return t.fileDownload(e.fileId,e.filename)}}},[t._v(t._s(e.filename))])])})],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})]),t._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:"流程详情",width:"80%"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.showModal?a("processMessage",{attrs:{"data-obj":t.dataObj}}):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"topTitle"},[e("span",{staticClass:"topTitle-span1"},[this._v("检查数据提取")]),this._v(" "),e("span",{staticClass:"topTitle-span1"},[e("img",{attrs:{src:a("Dh6M"),alt:""}})]),this._v(" "),e("span",{staticClass:"topTitle-span1"},[this._v("提取数据记录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contentCellTitle"},[e("div",{staticClass:"contentCellTitle-1"}),this._v("查询条件\n        "),e("div",{staticClass:"button-content"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contentCellTitle"},[e("div",{staticClass:"contentCellTitle-1"}),this._v("数据列表\n      ")])}]};var d=a("C7Lr")(r,c,!1,function(t){a("AQIT")},"data-v-54075f00",null);e.default=d.exports},AQIT:function(t,e){}});
//# sourceMappingURL=89.1af77fd6d6bc67e9ec961577069638620.js.map