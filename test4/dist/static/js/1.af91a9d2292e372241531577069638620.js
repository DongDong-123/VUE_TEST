webpackJsonp([1],{"0B2S":function(e,a){},"0mco":function(e,a){},"2jpS":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:"",val3:["",""],val4:"",val5:"",val6:"",val7:!0,val8:"",val9:"",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"基于反洗钱机制成功防范的风险事件名称"},{name:"事件发起机构"},{name:"事发时间"},{name:"基本情况（隐去当事人和机构名称）"},{name:"取得成果"},{name:"是否向人民银行或当地人行机构报备"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加内容"},{name:"创建时间"},{name:"创建人"},{name:"更新时间 "},{name:"更新人 "}]),s()(e,"tableBody",[]),s()(e,"formValidate",{val1:"",val2:"",val3:["",""],val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:252,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val3:[{type:"array",required:!0,fields:{0:{required:!0,message:"此项不能为空",trigger:"change"},1:{required:!0,message:"此项不能为空",trigger:"change"}}}],val4:[{required:!0,message:"此项不能为空",trigger:"change"},{max:197,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"},{max:125,message:"输入长度过长",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val11:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={eventName:this.formValidate.val1,launchOrg:this.formValidate.val2,minEventEndTime:this.formValidate.val3[0],minEventStartTime:this.formValidate.val3[0],maxEventStartTime:this.formValidate.val3[1],maxEventEndTime:this.formValidate.val3[1],ifReportBank:this.formValidate.val4,flag:this.formValidate.val5,manager:this.formValidate.val6,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infRiskEvents/getInfRiskEventsExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infRiskEvents/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.eventName,t.watchTableCell.val2=e.data.launchOrg,t.watchTableCell.val3=e.data.eventStartTime,t.watchTableCell.val4=e.data.eventEndTime,t.watchTableCell.val5=e.data.baseContent,t.watchTableCell.val6=e.data.result,t.watchTableCell.val7=JSON.parse(e.data.ifReportBank),t.watchTableCell.val8=e.data.ifShow,t.watchTableCell.val9=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={eventName:a.formValidateModel1.val1,launchOrg:a.formValidateModel1.val2,eventStartTime:a.formValidateModel1.val3[0],eventEndTime:a.formValidateModel1.val3[1],baseContent:a.formValidateModel1.val4,result:a.formValidateModel1.val5,ifReportBank:a.formValidateModel1.val6,ifShow:a.formValidateModel1.val7,content:a.formValidateModel1.val8,bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infRiskEvents/updateInfRiskEvents",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infRiskEvents/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.eventName,a.formValidateModel1.val2=e.data.launchOrg,a.formValidateModel1.val3=[e.data.eventStartTime,e.data.eventEndTime],a.formValidateModel1.val4=e.data.baseContent,a.formValidateModel1.val5=e.data.result,a.formValidateModel1.val6=e.data.ifReportBank,a.formValidateModel1.val7=JSON.parse(e.data.ifShow),a.formValidateModel1.val8=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":150}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"基于反洗钱机制成功防范的风险事件名称",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"事件发起机构",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"事发时间",prop:"val3"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-start",placeholder:"请输入时间",value:e.formValidateModel1.val3,disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val3=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"基本情况（隐去当事人和机构名称）",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"取得成果",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否向人行或当地人行机构报备",prop:"val6"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"基于反洗钱机制成功防范的风险事件名称："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"事件发起机构："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"事发时间："}},[t("label",[e._v(e._s(e.watchTableCell.val3)+"~"+e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"基本情况（隐去当事人和机构名称）："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val5}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val5))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"取得成果："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"是否向人行或当地人行机构报备："}},[t("label",[e._v(e._s(e.watchTableCell.val7?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val8?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val9}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val9))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("UJHp")},"data-v-62da81a2",null);a.a=h.exports},"3kRq":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("VU7F"),s=t("lvfI"),d=t("fYFQ"),r=t.n(d),n=(t("Kmkn"),{components:{Treeselect:r.a,showUsualFiles:s.a,processMessage:i.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e=this;return{buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(a,t,l){if(""==e.taskPeipleModelData2.nextUser&&e.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!0,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1,appendFlag:!1,addFlagShow:!1,modifyFlagShow:!1,modal1:!0,modalDisableFlag:!0,formValidateModel1:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:!0,val10:"",val11:"",nextUser:"",appendAttachId:""},businessDeptList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],tableHeader:[{name:"序"},{name:"操作"},{name:"制度全称"},{name:"制度实施时间"},{name:"制度失效时间"},{name:"制定单位"},{name:"相关文号"},{name:"是否年内新建"},{name:"是否年内修订"},{name:"是否报备"},{name:"状态"},{name:"信息显示"},{name:"附件"},{name:"管理部门"},{name:"追加信息 "},{name:"发布时间 "},{name:"发布人 "},{name:"更新时间 "},{name:"更新人 "}],tableBody:[{id:"",title:"",enabledTime:"",diabledTime:"",creator:"",fileNum:"",ifYearNew:"",ifYearRevise:"",ifReport:"",flag:"",ifShow:"",manager:"",pubTime:"",pubUser:"",updateTime:"",updater:""}],formValidate:{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]},ruleValidate:{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(a,t,l){if(""==e.formValidateModel1.nextUser&&e.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{required:!0,message:"此项不能为空",trigger:"change"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"},{max:125,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"},{max:125,message:"输入长度过长",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}}},methods:{closeFather:function(){this.$emit("closeModel")},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,enabledTime:this.formValidate.value2,creator:this.formValidate.val2,ifReport:this.formValidate.val3,flag:this.formValidate.val4,ifShow:this.formValidate.val5,manager:this.formValidate.val6,ifExacte:this.ifExacte,minEnabledTime:this.minEnabledTime,maxEnabledTime:this.maxEnabledTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infInternalControl/getInfInternalControlExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infInternalControl/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.enabledTime,t.watchTableCell.val3=e.data.diabledTime,t.watchTableCell.val4=e.data.creator,t.watchTableCell.val5=e.data.fileNum,t.watchTableCell.val6=e.data.ifYearNew,t.watchTableCell.val7=e.data.ifYearRevise,t.watchTableCell.val8=e.data.ifReport,t.watchTableCell.val9=e.data.ifShow,t.watchTableCell.val10=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,enabledTime:a.formValidateModel1.val2,diabledTime:a.formValidateModel1.val3,creator:a.formValidateModel1.val4,fileNum:a.formValidateModel1.val5,ifYearNew:a.formValidateModel1.val6,ifYearRevise:a.formValidateModel1.val7,ifReport:a.formValidateModel1.val8,ifShow:a.formValidateModel1.val9,content:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infInternalControl/updateInfInternalControl",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infInternalControl/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=e.data.enabledTime,a.formValidateModel1.val3=e.data.diabledTime,a.formValidateModel1.val4=e.data.creator,a.formValidateModel1.val5=e.data.fileNum,a.formValidateModel1.val6=e.data.ifYearNew,a.formValidateModel1.val7=e.data.ifYearRevise,a.formValidateModel1.val8=e.data.ifReport,a.formValidateModel1.val9=JSON.parse(e.data.ifShow),a.formValidateModel1.val10=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度全称",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度实施时间",prop:"val2"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:e.formValidateModel1.val2,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":e.datechange2}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度失效时间",prop:"val3"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请输入时间",value:e.formValidateModel1.val3,disabled:this.addFlag},on:{"on-change":e.datechange3}})],1),e._v(" "),t("FormItem",{attrs:{label:"制定单位",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"相关文号",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否年内新建",prop:"val6"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否年内修订",prop:"val7"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否报备",prop:"val8"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val10"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"主题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"制度全称："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"制度实施时间："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"制度失效时间："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"制定单位："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"相关文号："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"是否年内新建："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val6?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否年内修订："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val7?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否报备："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val8?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("label",[e._v(e._s("true"==e.watchTableCell.val9?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val10}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val10))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var p=t("C7Lr")(n,c,!1,function(e){t("8QSH")},"data-v-66f50d93",null);a.a=p.exports},"7PeU":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_POST_TYPE").then(function(e){"200"==e.code&&(l.PROCESS_POST_TYPE=e.data.PROCESS_POST_TYPE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a,t=this;return a={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,PROCESS_POST_TYPE:[],delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,a,l){if(""==t.taskPeipleModelData2.nextUser&&t.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",val12:"",val13:"",val14:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(a,"modifyFlag",!1),s()(a,"appendFlag",!1),s()(a,"addFlagShow",!1),s()(a,"modifyFlagShow",!1),s()(a,"modal1",!1),s()(a,"modalDisableFlag",!0),s()(a,"formValidateModel1",{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",val12:"",val13:!0,val14:"",nextUser:"",appendAttachId:""}),s()(a,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(a,"tableHeader",[{name:"序"},{name:"操作"},{name:"项目"},{name:"姓名"},{name:"职务"},{name:"办公电话"},{name:"移动电话"},{name:"邮箱地址"},{name:"反洗钱专业资质"},{name:"从事金融工作时间（年）"},{name:"从事反洗钱工作时间（年）"},{name:"岗位类型"},{name:"是否从事可疑交易分析"},{name:"状态"},{name:"是否公开"},{name:"附件"},{name:"管理部门"},{name:"追加内容"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}]),s()(a,"tableBody",[{id:"",title:"",name:"",duty:"",tele:"",phone:"",email:"",qualification:"",workBankYears:"",workAntiYears:"",postType:"",ifSuspect:"",flag:"",ifShow:"",manager:"",pubTime:"",pubUser:"",updateTime:"",updater:""}]),s()(a,"formValidate",{val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:[]}),s()(a,"ruleValidate",(e={bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,a,l){if(""==t.formValidateModel1.nextUser&&t.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:120,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"blue"},{max:20,message:"输入长度过长",trigger:"blur"}],val3:[{required:!0,message:"此项不能为空",trigger:"blue"},{max:120,message:"输入长度过长",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:30,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,message:"此项不能为空",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机格式不正确",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"email",message:"此项不能为空",trigger:"blur"}],val7:[{max:20,message:"输入长度过长",trigger:"blur"}],val8:[{pattern:/^[0-9]*[1-9][0-9]*$/,message:"格式不正确",trigger:"blur"},{validator:function(e,a,t){a&&a.length>20?t("输入长度过长"):t()},trigger:"blur"}],val9:[{pattern:/^[0-9]*[1-9][0-9]*$/,message:"格式不正确",trigger:"blur"},{validator:function(e,a,t){a&&a.length>20?t("输入长度过长"):t()},trigger:"blur"}]},s()(e,"val10",[{required:!0,message:"此项不能为空",trigger:"change"}]),s()(e,"val12",[{required:!0,message:"此项不能为空",trigger:"change"}]),s()(e,"val13",[{required:!0,message:"此项不能为空",trigger:"change"}]),s()(e,"Inputvalue1",[{required:!1,message:"",trigger:"blur"}]),s()(e,"Inputvalue2",[{required:!1,message:"",trigger:"blur"}]),e)),a},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={ifExacte:this.ifExacte,name:this.formValidate.val1,phone:this.formValidate.val2,email:this.formValidate.val3,postType:this.formValidate.val4,ifSuspect:this.formValidate.val5,ifShow:this.formValidate.val6,flag:this.formValidate.val7,manager:this.formValidate.val8,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infPostPersonnel/getInfPostPersonnelExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infPostPersonnel/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.name,t.watchTableCell.val3=e.data.duty,t.watchTableCell.val4=e.data.tele,t.watchTableCell.val5=e.data.phone,t.watchTableCell.val6=e.data.email,t.watchTableCell.val7=e.data.qualification,t.watchTableCell.val8=e.data.workBankYears,t.watchTableCell.val9=e.data.workAntiYears,t.watchTableCell.val10=e.data.postType,t.watchTableCell.val12=e.data.ifSuspect,t.watchTableCell.val13=e.data.ifShow,t.watchTableCell.val14=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,name:a.formValidateModel1.val2,duty:a.formValidateModel1.val3,tele:a.formValidateModel1.val4,phone:a.formValidateModel1.val5,email:a.formValidateModel1.val6,qualification:a.formValidateModel1.val7,workBankYears:a.formValidateModel1.val8,workAntiYears:a.formValidateModel1.val9,postType:a.formValidateModel1.val10,ifSuspect:a.formValidateModel1.val12,ifShow:a.formValidateModel1.val13,content:a.formValidateModel1.val14,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infPostPersonnel/updateInfPostPersonnel",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infPostPersonnel/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=e.data.name,a.formValidateModel1.val3=e.data.duty,a.formValidateModel1.val4=e.data.tele,a.formValidateModel1.val5=e.data.phone,a.formValidateModel1.val6=e.data.email,a.formValidateModel1.val7=e.data.qualification,a.formValidateModel1.val8=e.data.workBankYears,a.formValidateModel1.val9=e.data.workAntiYears,a.formValidateModel1.val10=e.data.postType,a.formValidateModel1.val12=e.data.ifSuspect,a.formValidateModel1.val13=JSON.parse(e.data.ifShow),a.formValidateModel1.val14=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":190}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"项目",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"姓名",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"职务",prop:"val3"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"办公电话",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"移动手机号",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"邮箱地址",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"反洗钱专业资质",prop:"val7"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}})],1),e._v(" "),t("FormItem",{attrs:{label:"从事金融工作时间（年）",prop:"val8"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"从事反洗钱工作时间（年）",prop:"val9"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}})],1),e._v(" "),t("FormItem",{attrs:{label:"岗位类型",prop:"val10"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}},e._l(e.PROCESS_POST_TYPE,function(a,l){return t("Radio",{key:l,attrs:{label:a.code,disabled:e.addFlag}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否从事可疑交易分析",prop:"val12"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val12,callback:function(a){e.$set(e.formValidateModel1,"val12",a)},expression:"formValidateModel1.val12"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val13,callback:function(a){e.$set(e.formValidateModel1,"val13",a)},expression:"formValidateModel1.val13"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val14"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val14,callback:function(a){e.$set(e.formValidateModel1,"val14",a)},expression:"formValidateModel1.val14"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加信息"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":200}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"项目："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"姓名："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"职务："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"办公电话："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"移动手机号："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"邮箱地址："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"反洗钱专业资质："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"从事金融工作时间（年）："}},[t("label",[e._v(e._s(e.watchTableCell.val8))])]),e._v(" "),t("FormItem",{attrs:{label:"从事反洗钱工作时间（年）："}},[t("label",[e._v(e._s(e.watchTableCell.val9))])]),e._v(" "),t("FormItem",{attrs:{label:"岗位类型："}},[t("label",[e._v(e._s(e.watchTableCell.val10))])]),e._v(" "),t("FormItem",{attrs:{label:"是否从事可疑交易："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val12?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val13?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容"}},[t("label",[e._v(e._s(e.watchTableCell.val14))])]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("wfNM")},"data-v-f071bb22",null);a.a=h.exports},"8QSH":function(e,a){},"8aUg":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("VU7F"),s=t("lvfI"),d=t("fYFQ"),r=t.n(d),n=(t("Kmkn"),{components:{Treeselect:r.a,showUsualFiles:s.a,processMessage:i.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE,PROCESS_REMEDIATION_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE,l.reformResults=e.data.PROCESS_REMEDIATION_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}},"formValidateModel1.val3":function(e,a){this.$refs.formValidateModel1.validateField("val3")},"formValidateModel1.val4":function(e,a){this.$refs.formValidateModel1.validateField("val4")}},data:function(){var e=this;return{buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,reformResults:[],delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(a,t,l){if(""==e.taskPeipleModelData2.nextUser&&e.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1,appendFlag:!1,addFlagShow:!1,modifyFlagShow:!1,modal1:!1,modalDisableFlag:!0,formValidateModel1:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:!0,val8:"",val11:"",nextUser:"",appendAttachId:""},businessDeptList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],tableHeader:[{name:"序"},{name:"操作"},{name:"调查通知书文号"},{name:"调查通知时间"},{name:"实施行政调查单位"},{name:"配合机构名称"},{name:"完成调查时间"},{name:"是否按时报送数据"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加信息"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}],tableBody:[],formValidate:{val1:"",val2:"",val3:["",""],val5:"",val4:[]},ruleValidate:{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],nextUser:[{required:!1,validator:function(a,t,l){if(""==e.formValidateModel1.nextUser&&e.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,validator:function(a,t,l){if(""==e.formValidateModel1.val2)return l(new Error("请选择时间"));l()},trigger:"blur"}],val3:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{type:"string",max:512,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:512,message:"您超出了范围",trigger:"blur"}]}}},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={implementUnit:this.formValidate.val1,coordinateOrg:this.formValidate.val2,minCompleteTime:this.formValidate.val3[0],maxCompleteTime:this.formValidate.val3[1],manager:o()(this.formValidate.val4),flag:this.formValidate.val5,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infAdministrativeInvstigation/getInfAdministrativeInvstigationExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infAdministrativeInvstigation/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.fileNum,t.watchTableCell.val2=e.data.notifyTime,t.watchTableCell.val3=e.data.implementUnit,t.watchTableCell.val4=e.data.coordinateOrg,t.watchTableCell.val5=e.data.completeTime,t.watchTableCell.val6=e.data.ifReportOntime,t.watchTableCell.val7=e.data.ifShow,t.watchTableCell.val8=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,fileNum:a.formValidateModel1.val1,notifyTime:a.formValidateModel1.val2,implementUnit:a.formValidateModel1.val3,coordinateOrg:a.formValidateModel1.val4,completeTime:a.formValidateModel1.val5,ifReportOntime:a.formValidateModel1.val6,ifShow:a.formValidateModel1.val7,content:a.formValidateModel1.val8,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infAdministrativeInvstigation/updateInfAdministrativeInvstigation",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infAdministrativeInvstigation/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=e.data.fileNum,a.formValidateModel1.val2=e.data.notifyTime,a.formValidateModel1.val3=e.data.implementUnit,a.formValidateModel1.val4=e.data.coordinateOrg,a.formValidateModel1.val5=e.data.completeTime,a.formValidateModel1.val6=e.data.ifReportOntime,a.formValidateModel1.val7=JSON.parse(e.data.ifShow),a.formValidateModel1.val8=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"调查通知书号",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"调查通知时间",prop:"val2"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:e.formValidateModel1.val2,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val2=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"实施行政调查单位",prop:"val3"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"配合机构名称",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"完成调查时间",prop:""}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:e.formValidateModel1.val5,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val5=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否按时报送数据",prop:"val6"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}},[t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")]),e._v(" "),t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"调查通知书号："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"调查通知时间："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"实施行政调查单位："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"配合机构名称："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"完成调查时间："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"是否按时报送数据："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val6?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val7?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val8}},[t("p",{staticClass:"textOverflow textMaxWidth textTdTop",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val8))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var p=t("C7Lr")(n,c,!1,function(e){t("W+1K")},"data-v-70861d62",null);a.a=p.exports},"9tq2":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("VU7F"),s=t("lvfI"),d=t("fYFQ"),r=t.n(d),n=(t("Kmkn"),{components:{Treeselect:r.a,showUsualFiles:s.a,processMessage:i.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}this.getRegion();var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE,PROCESS_REMEDIATION_STATE,PROCESS_ASSIST_ITEM").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE,l.reformResults=e.data.PROCESS_REMEDIATION_STATE,l.assistWorks=e.data.PROCESS_ASSIST_ITEM)}).catch(function(e){}),this.axios.post("/process/getProcessDic/region").then(function(e){"200"==e.code&&(l.executeProvinces=e.data)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.formValidateModel1={bpmTitle:"",val1:[],val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val12:"",val11:"",val13:!0,val14:"",val15:"",nextUser:""},this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e=this;return{buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,regionLsit:[],firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,addPeopleArr:[],assistWorks:[],executeProvinces:[],reformResults:[],delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(a,t,l){if(""==e.taskPeipleModelData2.nextUser&&e.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val12:"",val11:"",val13:"",val14:"",val15:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1,appendFlag:!1,addFlagShow:!1,modifyFlagShow:!1,modal1:!1,modalDisableFlag:!0,formValidateModel1:{bpmTitle:"",val1:[],val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val12:"",val11:"",val13:!0,val14:"",val15:"",nextUser:"",appendAttachId:""},tableHeader:[{name:"序"},{name:"操作"},{name:"协助事项"},{name:"经办人"},{name:"执行机构"},{name:"执行省份"},{name:"执行人"},{name:"执行人证件号"},{name:"协查日期"},{name:"客户号"},{name:"原系统客户号"},{name:"客户名称"},{name:"证件类型"},{name:"证件号码"},{name:"冻结客户个数"},{name:"案件类型"},{name:"涉案金额"},{name:"交易笔数"},{name:"业务名称"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加信息"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}],tableBody:[],formValidate:{val1:"",val2:"",val3:"",val4:"",val5:["",""],val6:"",val7:"",val8:"",val9:[]},ruleValidate:{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],nextUser:[{required:!1,validator:function(a,t,l){if(""==e.formValidateModel1.nextUser&&e.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val2:[{max:29,message:"输入长度过长",trigger:"blur"}],val3:[{max:125,message:"输入长度过长",trigger:"blur"}],val4:[],val5:[{max:60,message:"输入长度过长",trigger:"blur"}],val6:[{max:61,message:"输入长度过长",trigger:"blur"}],val7:[],val8:[{required:!1,pattern:/^[1-9]+[0-9]*$/,message:"请输入数字",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val9:[{max:29,message:"输入长度过长",trigger:"blur"}],val10:[{max:29,message:"输入长度过长",trigger:"blur"}],val11:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val14:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val15:[{max:7,message:"输入长度过长",trigger:"blur"}],val12:[{max:125,message:"输入长度过长",trigger:"blur"}]}}},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={executeOrg:this.formValidate.val2,executeProvince:this.formValidate.val3?this.formValidate.val3:"",executor:this.formValidate.val4,maxAgentTime:this.formValidate.val5[1],minAgentTime:this.formValidate.val5[0],respondent:this.formValidate.val6,businessName:this.formValidate.val7,flag:this.formValidate.val8,manager:o()(this.formValidate.val9),ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infCaseInvestigation/getInfCaseInvestigationExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},getRegion:function(){var e=this;this.axios.post("/process/getProcessDic/region").then(function(a){"200"==a.code&&(e.regionLsit=a.data)}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},delPeoplefun:function(e){this.addPeopleArr.splice(e,1)},addpeoplefun:function(){this.addPeopleArr.push({certificateId:"",certificateType:"",clientId:"",clientName:"",clientOldId:""})},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infCaseInvestigation/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.assistWork,t.watchTableCell.val2=e.data.agent,t.watchTableCell.val3=e.data.executeOrg,t.watchTableCell.val4=e.data.executeProvince,t.watchTableCell.val5=e.data.executor,t.watchTableCell.val6=e.data.executorId,t.watchTableCell.val7=e.data.agentTime,t.addPeopleArr=e.data.clients,t.watchTableCell.val8=e.data.freezingNum,t.watchTableCell.val9=e.data.caseType,t.watchTableCell.val10=e.data.involvedMoney,t.watchTableCell.val15=e.data.exchangeNum,t.watchTableCell.val12=e.data.businessName,t.watchTableCell.val13=e.data.ifShow,t.watchTableCell.val14=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,assistWork:o()(a.formValidateModel1.val1),agent:a.formValidateModel1.val2,executeOrg:a.formValidateModel1.val3,executeProvince:a.formValidateModel1.val4,executor:a.formValidateModel1.val5,executorId:a.formValidateModel1.val6,agentTime:a.formValidateModel1.val7,clients:a.addPeopleArr,freezingNum:a.formValidateModel1.val8,caseType:a.formValidateModel1.val9,involvedMoney:a.formValidateModel1.val10,exchangeNum:a.formValidateModel1.val15,businessName:a.formValidateModel1.val12,ifShow:a.formValidateModel1.val13,content:a.formValidateModel1.val14,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infCaseInvestigation/updateInfCaseInvestigation",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.buttonDisabled=!1,a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infCaseInvestigation/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=JSON.parse(e.data.assistWork),a.formValidateModel1.val2=e.data.agent,a.formValidateModel1.val3=e.data.executeOrg,a.formValidateModel1.val4=e.data.executeProvince,a.formValidateModel1.val5=e.data.executor,a.formValidateModel1.val6=e.data.executorId,a.formValidateModel1.val7=e.data.agentTime,a.addPeopleArr=e.data.clients,a.formValidateModel1.val8=e.data.freezingNum,a.formValidateModel1.val9=e.data.caseType,a.formValidateModel1.val10=e.data.involvedMoney,a.formValidateModel1.val15=e.data.exchangeNum,a.formValidateModel1.val12=e.data.businessName,a.formValidateModel1.val13=JSON.parse(e.data.ifShow),a.formValidateModel1.val14=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.attachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:e.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"协助事项"}},[t("CheckboxGroup",{model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}},e._l(e.assistWorks,function(a){return t("Checkbox",{key:a.code,attrs:{label:a.code,disabled:e.addFlag}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("FormItem",{attrs:{label:"经办人",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:e.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行机构",prop:"val3"}},[t("Input",{attrs:{placeholder:"请输入",disabled:e.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行省份"}},[t("Select",{attrs:{disabled:e.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}},e._l(e.executeProvinces,function(a,l){return t("Option",{key:l,attrs:{value:a.code}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("FormItem",{attrs:{label:"执行人",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:e.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行人证件号码",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:e.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"协查日期"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{value:e.formValidateModel1.val7,disabled:e.addFlag,format:"yyyy-MM-dd",type:"date",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":function(a){e.formValidateModel1.val7=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"被调查人"}},[t("Row",[t("Row",{staticStyle:{"padding-bottom":"10px","padding-right":"10px","box-sizing":"border-box"}},[t("Button",{staticStyle:{float:"right"},attrs:{type:"dashed",icon:"md-add",size:"small",disabled:e.addFlag},on:{click:e.addpeoplefun}},[e._v("新增")])],1),e._v(" "),t("Row",{staticClass:"flexStart"},[t("Row",{},e._l(e.addPeopleArr,function(a,l){return t("Row",{key:l,staticClass:"flexStart",staticStyle:{border:"1px dashed #E8EAEC"}},[t("Row",{staticClass:"flexStartWrap",staticStyle:{width:"70%"}},[t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户号")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientId,callback:function(t){e.$set(a,"clientId",t)},expression:"item.clientId"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("源客户号")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientOldId,callback:function(t){e.$set(a,"clientOldId",t)},expression:"item.clientOldId"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户名称")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientName,callback:function(t){e.$set(a,"clientName",t)},expression:"item.clientName"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件类型")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateType,callback:function(t){e.$set(a,"certificateType",t)},expression:"item.certificateType"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件号码")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateId,callback:function(t){e.$set(a,"certificateId",t)},expression:"item.certificateId"}})],1)],1),e._v(" "),t("Row",{staticStyle:{width:"30%","text-align":"center"}},[0!=l?t("Button",{staticStyle:{float:"right","margin-right":"10px","margin-top":"23px"},attrs:{type:"dashed",icon:"ios-close",size:"small",disabled:e.addFlag},on:{click:function(a){return e.delPeoplefun(l)}}},[e._v("删除")]):e._e()],1)],1)}),1)],1)],1)],1),e._v(" "),t("FormItem",{attrs:{label:"冻结客户个数",prop:"val8"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"案件类型",prop:"val9"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}})],1),e._v(" "),t("FormItem",{attrs:{label:"涉及金额",prop:"val10"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"交易笔数",prop:"val15"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val15,callback:function(a){e.$set(e.formValidateModel1,"val15",a)},expression:"formValidateModel1.val15"}})],1),e._v(" "),t("FormItem",{attrs:{label:"业务名称",prop:"val12"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val12,callback:function(a){e.$set(e.formValidateModel1,"val12",a)},expression:"formValidateModel1.val12"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val13,callback:function(a){e.$set(e.formValidateModel1,"val13",a)},expression:"formValidateModel1.val13"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val14"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val14,callback:function(a){e.$set(e.formValidateModel1,"val14",a)},expression:"formValidateModel1.val14"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"协助事项："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"经办人："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"执行机构："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"执行省份："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"执行人："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"执行人证件号码："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"协查日期："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"被调查人"}},[t("Row",[t("Row",{staticClass:"flexStart"},[t("Row",{},e._l(e.addPeopleArr,function(a,l){return t("Row",{key:l,staticClass:"flexStart",staticStyle:{border:"1px dashed #E8EAEC"}},[t("Row",{staticClass:"flexStartWrap",staticStyle:{width:"70%"}},[t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户号")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:""},model:{value:a.clientId,callback:function(t){e.$set(a,"clientId",t)},expression:"item.clientId"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("源客户号")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:""},model:{value:a.clientOldId,callback:function(t){e.$set(a,"clientOldId",t)},expression:"item.clientOldId"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户名称")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:""},model:{value:a.clientName,callback:function(t){e.$set(a,"clientName",t)},expression:"item.clientName"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件类型")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:""},model:{value:a.certificateType,callback:function(t){e.$set(a,"certificateType",t)},expression:"item.certificateType"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件名称")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:""},model:{value:a.certificateId,callback:function(t){e.$set(a,"certificateId",t)},expression:"item.certificateId"}})],1)],1)],1)}),1)],1)],1)],1),e._v(" "),t("FormItem",{attrs:{label:"冻结客户个数："}},[t("label",[e._v(e._s(e.watchTableCell.val8))])]),e._v(" "),t("FormItem",{attrs:{label:"案件类型："}},[t("label",[e._v(e._s(e.watchTableCell.val9))])]),e._v(" "),t("FormItem",{attrs:{label:"涉及金额："}},[t("label",[e._v(e._s(e.watchTableCell.val10))])]),e._v(" "),t("FormItem",{attrs:{label:"交易笔数："}},[t("label",[e._v(e._s(e.watchTableCell.val15))])]),e._v(" "),t("FormItem",{attrs:{label:"业务名称："}},[t("label",[e._v(e._s(e.watchTableCell.val12))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val13?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val4}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val4))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var p=t("C7Lr")(n,c,!1,function(e){t("a2AI")},"data-v-c8d7e892",null);a.a=p.exports},"Bsd+":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}},watch:{$route:function(e,a){this.getName(),this.tableList(),this.getExtractunit(),this.getCheckState()},modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={contentFlag1:!1,contentFlag2:!1,processName:"",menuId:"",showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:!0,val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"状态"},{name:"是否公开"},{name:"管理部门"},{name:"追加内容"},{name:"附件"},{name:"发布人"},{name:"发布时间"},{name:"更新人"},{name:"更新时间"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:250,message:"输入长度过长",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{required:!0,message:"此项不能为空",trigger:"change"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},getExtractunit:function(){this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(that.selectTreeCleanUp(e.data),that.data1=e.data)}).catch(function(e){})},getCheckState:function(){this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(that.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},getName:function(){var e=this,a=window.location.hash.split("?")[0],t=a.substr(1,a.length);this.axios.post("/process/getProcessTypeName?nameUrl="+t).then(function(a){"200"==a.code&&(e.processName=a.data)})},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,flag:this.formValidate.val3,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("process/infProcess/getInfProcessExcelList?menu="+this.menuId,a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infProcess/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.ifShow,t.watchTableCell.val3=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,ifShow:a.formValidateModel1.val2,content:a.formValidateModel1.val3,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infProcess/updateInfProcess",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPubTime=e[0],this.maxPubTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infProcess/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=JSON.parse(e.data.ifShow),a.formValidateModel1.val3=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:function(a){e.modal1=!1}}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val2?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("ZIgl")},"data-v-1971b2da",null);a.a=h.exports},ECcR:function(e,a){},L9x4:function(e,a){},LSlB:function(e,a){},O2nC:function(e,a){},P0Gf:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){}),this.axios.post("/process/getProcessDic/region").then(function(e){"200"==e.code&&(l.regionArr=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_ASSIST_ITEM").then(function(e){"200"==e.code&&(l.PROCESS_ASSIST_ITEM=e.data.PROCESS_ASSIST_ITEM)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,PROCESS_ASSIST_ITEM:[],minAgentTime:"",maxAgentTime:"",regionArr:[],showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{addPeopleArr:[{bpmTitle:"",busId:"",certificateId:"",certificateType:"",clientId:"",clientName:"",id:""}],bpmTitle:"",val1:[],val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",val12:"",val13:"",val14:"",val15:"",nextUser:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{addPeopleArr:[{bpmTitle:"",busId:"",certificateId:"",certificateType:"",clientId:"",clientName:"",id:""}],bpmTitle:"",val1:[],val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",val12:"",val13:"",val14:!0,val15:"",nextUser:"",appendAttachId:""}),s()(e,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"协助事项"},{name:"经办人"},{name:"执行机构"},{name:"执行省份"},{name:"执行人"},{name:"执行人证件号"},{name:"协查日期"},{name:"被调查人"},{name:"案件类型"},{name:"涉案金额"},{name:"交易笔数"},{name:"业务名称"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加信息"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{val1:"",val2:"",val3:"",val4:"",val5:[],val6:"",val7:"",val8:"",val9:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val2:[{max:29,message:"输入长度过长",trigger:"blur"}],val3:[{max:125,message:"输入长度过长",trigger:"blur"}],val5:[{max:29,message:"输入长度过长",trigger:"blur"}],val6:[{max:29,message:"输入长度过长",trigger:"blur"}],d1:[{max:2,message:"输入长度过长",trigger:"blur"}],d2:[{max:29,message:"输入长度过长",trigger:"blur"}],d3:[{max:29,message:"输入长度过长",trigger:"blur"}],d4:[{max:29,message:"输入长度过长",trigger:"blur"}],val9:[{max:29,message:"输入长度过长",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val10:[{pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"格式不正确",trigger:"blur"},{max:29,message:"输入长度过长",trigger:"blur"}],val12:[{pattern:/^[0-9]*[0-9][0-9]*$/,message:"格式不正确",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val13:[{max:29,message:"输入长度过长",trigger:"blur"}],val15:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={executeOrg:this.formValidate.val2,executeProvince:this.formValidate.val3,executor:this.formValidate.val4,minAgentTime:this.minAgentTime,maxAgentTime:this.maxAgentTime,respondent:this.formValidate.val6,businessName:this.formValidate.val7,flag:this.formValidate.val8,manager:this.formValidate.val9,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infFreezingInfo/getInfFreezingInfoExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},delPeoplefun:function(e){this.formValidateModel1.addPeopleArr.splice(e,1)},addpeoplefun:function(){this.formValidateModel1.addPeopleArr.push({bpmTitle:"",busId:"",certificateId:"",certificateType:"",clientId:"",clientName:"",id:""})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infFreezingInfo/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.attachId=e.data.attachId,t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.assistWork,t.watchTableCell.val2=e.data.agent,t.watchTableCell.val3=e.data.executeOrg,t.watchTableCell.val4=e.data.executeProvince,t.watchTableCell.val5=e.data.executor,t.watchTableCell.val6=e.data.executorId,t.watchTableCell.val7=e.data.agentTime,t.watchTableCell.val8=e.data.clients,t.watchTableCell.val9=e.data.caseType,t.watchTableCell.val10=e.data.involvedMoney,t.watchTableCell.val12=e.data.exchangeNum,t.watchTableCell.val13=e.data.businessName,t.watchTableCell.val14=e.data.ifShow,t.watchTableCell.val15=e.data.content,t.watchTableCell.addPeopleArr=e.data.clients,t.dataObj4={data:e.data,showFlag:!1,disabled:!1,worfFlow:!0},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1,worfFlow:!0},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,assistWork:a.formValidateModel1.val1,agent:a.formValidateModel1.val2,executeOrg:a.formValidateModel1.val3,executeProvince:a.formValidateModel1.val4,executor:a.formValidateModel1.val5,executorId:a.formValidateModel1.val6,agentTime:a.formValidateModel1.val7,clients:a.formValidateModel1.addPeopleArr,caseType:a.formValidateModel1.val9,involvedMoney:a.formValidateModel1.val10,exchangeNum:a.formValidateModel1.val12,businessName:a.formValidateModel1.val13,ifShow:a.formValidateModel1.val14,content:a.formValidateModel1.val15,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infFreezingInfo/updateInfFreezingInfo",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!0})}})},datechange2:function(e){this.formValidateModel1.val7=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minAgentTime=e[0],this.maxAgentTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infFreezingInfo/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=JSON.parse(e.data.assistWork),a.formValidateModel1.val2=e.data.agent,a.formValidateModel1.val3=e.data.executeOrg,a.formValidateModel1.val4=e.data.executeProvince,a.formValidateModel1.val5=e.data.executor,a.formValidateModel1.val6=e.data.executorId,a.formValidateModel1.val7=e.data.agentTime,a.formValidateModel1.val8=e.data.clients,a.formValidateModel1.val9=e.data.caseType,a.formValidateModel1.val10=e.data.involvedMoney,a.formValidateModel1.val12=e.data.exchangeNum,a.formValidateModel1.val13=e.data.businessName,a.formValidateModel1.val14=JSON.parse(e.data.ifShow),a.formValidateModel1.val15=e.data.content,a.formValidateModel1.addPeopleArr=e.data.clients,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"协助事项",prop:"val1"}},[t("CheckboxGroup",{model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}},e._l(e.PROCESS_ASSIST_ITEM,function(a,l){return t("Checkbox",{key:l,attrs:{disabled:e.addFlag,label:a.code}},[e._v(e._s(a.name))])}),1)],1),e._v(" "),t("FormItem",{attrs:{label:"经办人",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行机构",prop:"val3"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行省份",prop:"val4"}},[t("Select",{attrs:{disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}},[t("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),e._l(e.regionArr,function(a,l){return t("Option",{key:l,attrs:{value:a.code,disabled:e.addFlag}},[e._v(e._s(a.name))])})],2)],1),e._v(" "),t("FormItem",{attrs:{label:"执行人",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"执行人证件号码",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"协查日期",prop:"val7"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:e.formValidateModel1.val7,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":e.datechange2}})],1),e._v(" "),t("FormItem",{attrs:{label:"被调查人"}},[t("Row",[t("Row",{staticStyle:{"padding-bottom":"10px","padding-right":"10px","box-sizing":"border-box"}},[t("Button",{staticStyle:{float:"right"},attrs:{type:"dashed",icon:"md-add",size:"small",disabled:e.addFlag},on:{click:e.addpeoplefun}},[e._v("新增")])],1),e._v(" "),t("Row",{staticClass:"flexStart"},[t("Row",{},e._l(e.formValidateModel1.addPeopleArr,function(a,l){return t("Row",{key:l,staticClass:"flexStart",staticStyle:{border:"1px dashed #E8EAEC"}},[t("Row",{staticClass:"flexStartWrap",staticStyle:{width:"70%"}},[t("Row",{staticClass:"processAddPeople-cell-cell"},[t("FormItem",{attrs:{label:"客户号",prop:"d1","label-width":100}},[t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientId,callback:function(t){e.$set(a,"clientId",t)},expression:"item.clientId"}})],1)],1),e._v(" "),t("Row",{staticClass:"processAddPeople-cell-cell"},[t("FormItem",{attrs:{label:"客户名称",prop:"d2","label-width":100}},[t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientName,callback:function(t){e.$set(a,"clientName",t)},expression:"item.clientName"}})],1)],1),e._v(" "),t("Row",{staticClass:"processAddPeople-cell-cell"},[t("FormItem",{attrs:{label:"证件类型",prop:"d3","label-width":100}},[t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateType,callback:function(t){e.$set(a,"certificateType",t)},expression:"item.certificateType"}})],1)],1),e._v(" "),t("Row",{staticClass:"processAddPeople-cell-cell"},[t("FormItem",{attrs:{label:"证件号码",prop:"d4","label-width":100}},[t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateId,callback:function(t){e.$set(a,"certificateId",t)},expression:"item.certificateId"}})],1)],1)],1),e._v(" "),t("Row",{staticStyle:{width:"30%","text-align":"center"}},[0!=l?t("Button",{staticStyle:{float:"right","margin-right":"10px","margin-top":"23px"},attrs:{type:"dashed",icon:"ios-close",size:"small",disabled:e.addFlag},on:{click:function(a){return e.delPeoplefun(l)}}},[e._v("删除")]):e._e()],1)],1)}),1)],1)],1)],1),e._v(" "),t("FormItem",{attrs:{label:"案件类型",prop:"val9"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}})],1),e._v(" "),t("FormItem",{attrs:{label:"涉案金额",prop:"val10"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"交易笔数",prop:"val12"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val12,callback:function(a){e.$set(e.formValidateModel1,"val12",a)},expression:"formValidateModel1.val12"}})],1),e._v(" "),t("FormItem",{attrs:{label:"业务名称",prop:"val13"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val13,callback:function(a){e.$set(e.formValidateModel1,"val13",a)},expression:"formValidateModel1.val13"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val14,callback:function(a){e.$set(e.formValidateModel1,"val14",a)},expression:"formValidateModel1.val14"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val15"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val15,callback:function(a){e.$set(e.formValidateModel1,"val15",a)},expression:"formValidateModel1.val15"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"协助事项："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"经办人："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"执行机构："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"执行省份："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"执行人："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"执行人证件号码："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"协查日期："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"被调查人："}},[t("label",[t("Row",[t("Row",{staticClass:"flexStart"},[t("Row",{},e._l(e.watchTableCell.addPeopleArr,function(a,l){return t("Row",{key:l,staticClass:"flexStart",staticStyle:{border:"1px dashed #E8EAEC"}},[t("Row",{staticClass:"flexStartWrap",staticStyle:{width:"70%"}},[t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户号")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientId,callback:function(t){e.$set(a,"clientId",t)},expression:"item.clientId"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("客户名称")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.clientName,callback:function(t){e.$set(a,"clientName",t)},expression:"item.clientName"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件类型")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateType,callback:function(t){e.$set(a,"certificateType",t)},expression:"item.certificateType"}})],1),e._v(" "),t("Row",{staticClass:"flexCenter processAddPeople-cell-cell"},[t("p",{staticClass:"processAddPeople3"},[e._v("证件号码")]),e._v(" "),t("Input",{staticStyle:{width:"50%"},attrs:{placeholder:"",size:"small",disabled:e.addFlag},model:{value:a.certificateId,callback:function(t){e.$set(a,"certificateId",t)},expression:"item.certificateId"}})],1)],1)],1)}),1)],1)],1)],1)]),e._v(" "),t("FormItem",{attrs:{label:"案件类型："}},[t("label",[e._v(e._s(e.watchTableCell.val9))])]),e._v(" "),t("FormItem",{attrs:{label:"涉案金额："}},[t("label",[e._v(e._s(e.watchTableCell.val10))])]),e._v(" "),t("FormItem",{attrs:{label:"交易笔数："}},[t("label",[e._v(e._s(e.watchTableCell.val12))])]),e._v(" "),t("FormItem",{attrs:{label:"业务名称："}},[t("label",[e._v(e._s(e.watchTableCell.val13))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val14?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val5}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val5))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("O2nC")},"data-v-ad7caf14",null);a.a=h.exports},PWI9:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:!0,val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"open",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"状态"},{name:"是否公开"},{name:"管理部门"},{name:"追加内容"},{name:"附件"},{name:"发布人"},{name:"发布时间"},{name:"更新人"},{name:"更新时间"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,flag:this.formValidate.val3,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infReportMaterial/getInfReportMaterialExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infReportMaterial/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.ifShow,t.watchTableCell.val3=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,ifShow:a.formValidateModel1.val2,content:a.formValidateModel1.val3,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infReportMaterial/updateInfReportMaterial",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPubTime=e[0],this.maxPubTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infReportMaterial/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=JSON.parse(e.data.ifShow),a.formValidateModel1.val3=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val2?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val1}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("XKi/")},"data-v-ccfdc728",null);a.a=h.exports},Qii4:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:"",val3:["",""],val4:"false",val5:"",val6:"",val7:!0,val8:"",val9:"",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"检查实施时间"},{name:"主查单位"},{name:"被查单位"},{name:"是否内审"},{name:"发现的主要问题"},{name:"整改情况"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加内容"},{name:"创建时间"},{name:"创建人"},{name:"更新时间 "},{name:"更新人 "}]),s()(e,"tableBody",[]),s()(e,"formValidate",{val1:"",val2:"",val3:["",""],val4:"",val5:"",val6:""}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val3:[{type:"array",required:!0,fields:{0:{required:!0,message:"此项不能为空",trigger:"change"},1:{required:!0,message:"此项不能为空",trigger:"change"}}}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val6:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val8:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={implementUnit:this.formValidate.val1,checkedUnit:this.formValidate.val2,minCheckEndTime:this.formValidate.val3[0],minCheckStartTime:this.formValidate.val3[0],maxCheckEndTime:this.formValidate.val3[1],maxCheckStartTime:this.formValidate.val3[1],ifInternalAudit:this.formValidate.val4,reformResult:this.formValidate.val5,flag:this.formValidate.val6,manager:this.formValidate.val7,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infInternalInspectionAudit/getInfInternalInspectionAuditExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infInternalInspectionAudit/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.implementUnit,t.watchTableCell.val2=e.data.checkedUnit,t.watchTableCell.val3=[e.data.checkStartTime,e.data.checkEndTime],t.watchTableCell.val4=e.data.ifInternalAudit,t.watchTableCell.val5=e.data.findProblems,t.watchTableCell.val6=e.data.reformResult,t.watchTableCell.val7=e.data.ifShow,t.watchTableCell.val8=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={implementUnit:a.formValidateModel1.val1,checkedUnit:a.formValidateModel1.val2,checkStartTime:a.formValidateModel1.val3[0],checkEndTime:a.formValidateModel1.val3[1],ifInternalAudit:a.formValidateModel1.val4,findProblems:a.formValidateModel1.val5,reformResult:a.formValidateModel1.val6,ifShow:a.formValidateModel1.val7,content:a.formValidateModel1.val8,bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infInternalInspectionAudit/updateInfInternalInspectionAudit",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infInternalInspectionAudit/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.implementUnit,a.formValidateModel1.val2=e.data.checkedUnit,a.formValidateModel1.val3=[e.data.checkStartTime,e.data.checkEndTime],a.formValidateModel1.val4=e.data.ifInternalAudit,a.formValidateModel1.val5=e.data.findProblems,a.formValidateModel1.val6=e.data.reformResult,a.formValidateModel1.val7=JSON.parse(e.data.ifShow),a.formValidateModel1.val8=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":150}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"检查实施时间",prop:"val3"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placement:"bottom-start",placeholder:"请输入时间",value:e.formValidateModel1.val3,disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val3=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"主查单位",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"被查单位",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否内审",prop:""}},[t("RadioGroup",{model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"发现的主要问题",prop:"val5"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"整改情况",prop:"val6"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"主查单位："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"被查单位："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"检查实施时间："}},[t("label",[e._v(e._s(e.watchTableCell.val3[0])+"~"+e._s(e.watchTableCell.val3[0]))])]),e._v(" "),t("FormItem",{attrs:{label:"是否内审："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val4?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"发现的主要问题："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"整改情况："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val7?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val8}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val8))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("TDPT")},"data-v-7b30f3e9",null);a.a=h.exports},TDPT:function(e,a){},UJHp:function(e,a){},UdzK:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_REWARD_PUNISH").then(function(e){"200"==e.code&&(l.PROCESS_REWARD_PUNISH=e.data.PROCESS_REWARD_PUNISH)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}},"formValidateModel1.val3":function(e,a){this.$refs.formValidateModel1.validateField("val3")}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,PROCESS_REWARD_PUNISH:[],showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:"",val3:[],val4:!0,val5:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"类别"},{name:"发起部门"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"追加信息"},{name:"发布时间 "},{name:"发布人 "},{name:"更新时间 "},{name:"更新人 "}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"}],val3:[{required:!0,validator:function(e,t,l){if(0==a.formValidateModel1.val3.length)return l(new Error("请选择"));l()},trigger:"xxxxxx"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,type:this.formValidate.val2,flag:this.formValidate.val4,ifExacte:this.ifExacte,minPubTime:this.minEnabledTime,maxPubTime:this.maxEnabledTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infRewardsPunishments/getInfRewardsPunishmentsExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infRewardsPunishments/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.type,t.watchTableCell.val3=e.data.launchDept,t.watchTableCell.val4=e.data.ifShow,t.watchTableCell.val5=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,type:a.formValidateModel1.val2,launchDept:a.formValidateModel1.val3,ifShow:a.formValidateModel1.val4,content:a.formValidateModel1.val5,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infRewardsPunishments/updateInfRewardsPunishments",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infRewardsPunishments/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=e.data.type,a.formValidateModel1.val3=JSON.parse(e.data.launchDept),a.formValidateModel1.val4=JSON.parse(e.data.ifShow),a.formValidateModel1.val5=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"类别："}},[t("Select",{attrs:{filterable:"",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),e._l(e.PROCESS_REWARD_PUNISH,function(a,l){return t("Option",{key:l,attrs:{value:a.code}},[e._v(e._s(a.name))])})],2)],1),e._v(" "),t("FormItem",{attrs:{label:"发起部门：",prop:"val3"}},[t("treeselect",{attrs:{multiple:!0,options:e.data1,placeholder:"请选择","max-height":100,disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val5"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"类别："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"发起部门："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("label",[e._v(e._s("true"==e.watchTableCell.val4?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val5}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val5))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("LSlB")},"data-v-7bbf9426",null);a.a=h.exports},"W+1K":function(e,a){},"WI+r":function(e,a){},WnKH:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:!0,val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"open",val10:"",val11:"",nextUser:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"状态"},{name:"是否公开"},{name:"管理部门"},{name:"追加内容"},{name:"附件"},{name:"发布人"},{name:"发布时间"},{name:"更新人"},{name:"更新时间"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:1e3,message:"输入长度过长",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,flag:this.formValidate.val3,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infWorkRecord/getInfWorkRecordExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infWorkRecord/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.ifShow,t.watchTableCell.val3=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,ifShow:a.formValidateModel1.val2,content:a.formValidateModel1.val3,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infWorkRecord/updateInfWorkRecord",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPubTime=e[0],this.maxPubTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infWorkRecord/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=JSON.parse(e.data.ifShow),a.formValidateModel1.val3=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val2?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("0B2S")},"data-v-70f46996",null);a.a=h.exports},"XKi/":function(e,a){},Yatm:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}},"formValidateModel1.val1":function(e,a){this.$refs.formValidateModel1.validateField("val1")},"formValidateModel1.val2":function(e,a){this.$refs.formValidateModel1.validateField("val1")}},data:function(){var e,a=this,t=function(e,t,l){if(0==a.formValidateModel1.val1.length)return l(new Error("请选择"));l()};return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPublicityTime:"",maxPublicityTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:[],val2:[],val3:"",val4:"",val5:["",""],val6:"",val7:"",val8:"",val9:!0,val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"发起机构"},{name:"参与机构"},{name:"宣传内容"},{name:"宣传方式"},{name:"宣传时间"},{name:"受众人数"},{name:"发放宣传资料份数"},{name:"宣传效果"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门"},{name:"追加信息"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{val1:[],val2:[],val3:"",val4:"",val5:["",""],val6:"",val7:""}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:12,message:"输入长度过长",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"请选择机构",validator:t,trigger:"xxxx"}],val2:[{required:!0,message:"请选择机构",validator:t,trigger:"xxxx"}],val3:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:247,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,validator:function(e,a,t){if(Array.isArray(a))a.map(function(e){if(""===e)return t("日期不能为空")});else if(""===a)return t("日期不能为空");return t()},trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"blur"},{pattern:/^[0-9]*[0-9][0-9]*$/,message:"格式不正确",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val7:[{max:7,message:"输入长度过长",trigger:"blur"}],val8:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={launchOrg:this.formValidate.val1,joinOrg:this.formValidate.val2,publicityContent:this.formValidate.val3,publicityType:this.formValidate.val4,minPublicityStartTime:this.minPublicityTime,maxPublicityEndTime:this.maxPublicityTime,flag:this.formValidate.val6,ifShow:this.formValidate.val7,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infPublicity/getInfPublicityExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infPublicity/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.launchOrg,t.watchTableCell.val2=e.data.joinOrg,t.watchTableCell.val3=e.data.publicityContent,t.watchTableCell.val4=e.data.publicityType,t.watchTableCell.val5=[],t.watchTableCell.val5.push(e.data.publicityStartTime),t.watchTableCell.val5.push(e.data.publicityEndTime),t.watchTableCell.val6=e.data.audienceNum,t.watchTableCell.val7=e.data.distributionNum,t.watchTableCell.val8=e.data.publicityResult,t.watchTableCell.val9=e.data.ifShow,t.watchTableCell.val10=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,launchOrg:a.formValidateModel1.val1,joinOrg:a.formValidateModel1.val2,publicityContent:a.formValidateModel1.val3,publicityType:a.formValidateModel1.val4,publicityStartTime:a.formValidateModel1.val5[0],publicityEndTime:a.formValidateModel1.val5[1],audienceNum:a.formValidateModel1.val6,distributionNum:a.formValidateModel1.val7,publicityResult:a.formValidateModel1.val8,ifShow:a.formValidateModel1.val9,content:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infPublicity/updateInfPublicity",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPublicityTime=e[0],this.maxPublicityTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infPublicity/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=JSON.parse(e.data.launchOrg),a.formValidateModel1.val2=JSON.parse(e.data.joinOrg),a.formValidateModel1.val3=e.data.publicityContent,a.formValidateModel1.val4=e.data.publicityType,a.formValidateModel1.val5=[],a.formValidateModel1.val5.push(e.data.publicityStartTime),a.formValidateModel1.val5.push(e.data.publicityEndTime),a.formValidateModel1.val6=e.data.audienceNum,a.formValidateModel1.val7=e.data.distributionNum,a.formValidateModel1.val8=e.data.publicityResult,a.formValidateModel1.val9=JSON.parse(e.data.ifShow),a.formValidateModel1.val10=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":150}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"发起机构",prop:"val1"}},[t("treeselect",{attrs:{multiple:!0,options:e.data1,placeholder:"请选择","max-height":100,disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"参与机构",prop:"val2"}},[t("treeselect",{attrs:{multiple:!0,options:e.data1,placeholder:"请选择","max-height":100,disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"宣传内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"宣传方式",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"宣传时间",prop:"val5"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",format:"yyyy-MM-dd",placeholder:"",value:e.formValidateModel1.val5,disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val5=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"受众人数",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"发放宣传资料份数",prop:"val7"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}})],1),e._v(" "),t("FormItem",{attrs:{label:"宣传效果",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val10"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"发起机构："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val1}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val1))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"参与机构："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val2}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val2))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"宣传内容："}},[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1),e._v(" "),t("FormItem",{attrs:{label:"宣传方式："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"宣传时间："}},[t("label",[e._v(e._s(e.watchTableCell.val5[0]))])]),e._v(" "),t("FormItem",{attrs:{label:"受众人数："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"发放宣传资料份数："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"宣传效果："}},[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val8}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val8))])])],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("label",[e._v(e._s("true"==e.watchTableCell.val9?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val10}},[t("p",{staticClass:"textOverflow textMaxWidth textTdTop",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val10))])])],1),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textOverflow textMaxWidth2",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("aCWv")},"data-v-3ec89d49",null);a.a=h.exports},ZIgl:function(e,a){},a2AI:function(e,a){},aCWv:function(e,a){},aaf0:function(e,a){},d1u0:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("aA9S"),o=t.n(l),i=t("3cXf"),s=t.n(i),d=t("a3Yh"),r=t.n(d),n=t("ldMV"),c=t("3kRq"),p=t("7PeU"),m=t("P0Gf"),h=t("uXve"),f=t("Yatm"),u=t("UdzK"),v=t("9tq2"),b=t("8aUg"),g=t("i+hA"),M=t("WnKH"),w=t("Qii4"),I=t("PWI9"),F=t("2jpS"),x=t("y93s"),_=t("jETw"),T=t("Bsd+"),V={components:{assessDetail:n.a,InternalControlSystemModel:c.a,postPersonnelModel:p.a,freezingInformationModel:m.a,trainModel:h.a,propagandaModel:f.a,rewardsAndpunishmentsModel:u.a,caseInvestigationModel:v.a,administrativeInvestigationModel:b.a,inspectModel:g.a,workRecordModel:M.a,InternalInspectionAndAuditModel:w.a,reportMaterialModel:I.a,riskEventsModel:F.a,publicOpinionMonitoringModel:x.a,InstitutionalRiskManagementModel:_.a,processpageModel:T.a},created:function(){var e=this,a=this.$route.query.documentId;this.axios.post("/bpm/getTaskDirective?documentId="+a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){"2"==a.data.optType?e.taskrebuton=!0:"1"==a.data.optType&&(e.taskrebuton=!1)}).catch(function(e){}),this.doTaskView()},beforeUpdate:function(){this.uploadList=this.$refs.upload.fileList},watch:{"formValidate.gender":function(e,a){"1"==this.formValidate.gender?this.showTree1Flg=!1:this.showTree1Flg=!0}},data:function(){var e,a=this;return e={taskrebuton:!0,tabview:"",processModel:!1,processModelTab:"",processval:"",tableHeader:[],tableBody:[],type:"",nextActivityName:"",nextUserName:"",nodeId:"",showTree1Flg:!0,tabname:"name1",batchId:"",uploadParams:{},showModal:!1,dataObjj:{}},r()(e,"tabview",""),r()(e,"dataObj",{}),r()(e,"defaultList",[]),r()(e,"filesArr",[]),r()(e,"lastStepFlag",!0),r()(e,"treeParam",{bpmName:"",nodeId:"",roleName:""}),r()(e,"uploadList",[]),r()(e,"columns1",[{title:"文件名",key:"name"},{title:"上传人",key:"creatorName"},{title:"操作",key:"",width:150,align:"center",render:function(e,t){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){a.fileDownload(t.index)}}},"下载"),e("Button",{props:{type:"error",disabled:parseInt(t.row.activityId)!=parseInt(JSON.parse(a.uploadParams.params).activityId),size:"small"},on:{click:function(){a.remove(t.index)}}},"删除")])}}]),r()(e,"formValidate2",{gender:"0",treeArr1:"",desc:"",desc1:""}),r()(e,"formValidate",{gender:"0",treeArr1:"",desc:"",desc1:""}),r()(e,"treeArr2",[]),r()(e,"treeArr1",[]),r()(e,"ruleValidate",{gender:[{required:!0,message:"Please select gender",trigger:"change"}],treeArr1:[{required:!1,validator:function(e,t,l){if(a.lastStepFlag&&"1"!=a.formValidate.gender&&""==a.formValidate.treeArr1)return l(new Error("请至少选择一个审核人"));l()}}],desc:[{type:"string",max:512,message:"长度最大不能超过512",trigger:"blur"}]}),r()(e,"ruleValidate2",{gender:[{required:!0,message:"Please select gender",trigger:"change"}],treeArr1:[{required:!1,validator:function(e,t,l){if(""==a.formValidate2.treeArr1)return l(new Error("请至少选择一个审核人"));l()}}],desc:[{type:"string",max:512,message:"长度最大不能超过512",trigger:"blur"}]}),r()(e,"informationTable",{extraTime:"",extraUnit:"",busiScope:"",permissionTime:"",permissionTime1:"",emergeLevel:""}),r()(e,"processTable",{name:"过程内容审核任务流程",content:[]}),e},methods:{closemodelfun:function(){this.processModel=!1,this.$router.push({path:"/processAuditExtrackApply",query:{menuCode:"110005001000"}})},remove:function(e){var a=this,t=this,l={deleteChild:!1,documentId:JSON.parse(this.uploadParams.params).documentId,fileId:this.uploadList[e].url,user:JSON.parse(this.uploadParams.params).user};this.axios.post("/bpm/delete",s()(l),{headers:{"Content-Type":"application/json"}}).then(function(l){(l.code="200")&&(a.uploadList.splice(e,1),t.$Message.success("删除成功"))}).catch(function(e){})},getFileList:function(e){var a=this,t=new FormData;t.append("documentId",e.documentId),this.axios.post("/bpm/list",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){"200"==e.code&&e.data.dataVo.files.forEach(function(e){a.defaultList.push({name:e.name,creatorName:e.creatorName,activityId:e.activityId,url:e.id})})}).catch(function(e){})},doTaskView:function(){var e=this,a={documentId:this.$route.query.documentId};this.getFileList(a),this.axios.post("/bpm/doTaskView",s()(a),{headers:{"Content-Type":"application/json"}}).then(function(a){if(a&&"200"==a.code){var t=JSON.parse(a.data.confirmData);e.tableHeader=t.tableHeader,e.tableBody=t.tableBody,console.log("tableData",t);var l=a.data.flowData;e.processTable.content=l.records.comments;var i=e.processTable.content[e.processTable.content.length-1];e.nextActivityName=i.nextActivityName,e.nextUserName=i.nextUserName,e.filesArr=a.data.files,e.treeParam={bpmName:l.userTask.serviceCode,nodeId:l.userTask.activityId,documentId:l.document.id,taskId:l.userTask.id,currentUser:l.userTask.ownerId,roleName:""},e.uploadParams={params:{activityId:l.userTask.activityId,documentId:l.document.id,taskId:l.userTask.id,user:l.userTask.ownerId,activityName:l.userTask.name}},e.uploadParams.params=s()(e.uploadParams.params),a.data.nextNodeId==l.userTask.activityId&&(e.lastStepFlag=!1);var d=o()({},e.treeParam);d.nodeId="0"+(parseInt(d.nodeId)+1),e.getNextRole(d,"name1")}else e.$Message.error(a.message)}).catch(function(e){})},handleFormatError:function(e){this.$Notice.warning({title:"附件格式错误",desc:"请选择zip、rar、xls、xlsx、doc、docx、pdf."})},handleMaxSize:function(e){this.$Notice.warning({title:"超出了附件大小限制",desc:" 不应超过10M"})},swithTab:function(){"name2"==this.tabname&&!(this.treeArr2.length>0)&&this.getNextRole(this.treeParam,"name2")},getNextRole:function(e,a){var t=this;this.axios.post("/bpm/getNextRole",s()(e),{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&("name1"==a?(t.treeArr1=e.data,t.treeArr1.forEach(function(e){e.expand=!0}),t.treeNLeafNodeDisable(t.treeArr1)):(t.treeArr2=e.data,t.treeArr2.forEach(function(e){e.expand=!0}),t.treeNLeafNodeDisable(t.treeArr2)))}).catch(function(e){})},getTransRoleUser:function(){var e=this;this.axios.post("/system/transRoleUser?nodeId="+this.nodeId,{headers:{"Content-Type":"application/json"}}).then(function(a){"200"==a.code&&(e.treeArr2=a.data.roleUserList,e.treeArr2.forEach(function(e){e.expand=!0}),e.treeNLeafNodeDisable(e.treeArr2))}).catch(function(e){})},showDialog:function(e){var a=this;if(e.assistFlag){var t=JSON.parse(e.param),l=t.bpmBusId,o=t.documentId,i=t.table,s=t.busId,d=t.typeFlag,r=t.dtoId;switch(i){case"inf_internal_control":this.tabview="InternalControlSystemModel";break;case"inf_post_personnel":this.tabview="postPersonnelModel";break;case"inf_freezing_info":this.tabview="freezingInformationModel";break;case"inf_train":this.tabview="trainModel";break;case"inf_publicity":this.tabview="propagandaModel";break;case"inf_rewards_punishments":this.tabview="rewardsAndpunishmentsModel";break;case"inf_case_investigation":this.tabview="caseInvestigationModel";break;case"inf_administrative_invstigation":this.tabview="administrativeInvestigationModel";break;case"inf_check":this.tabview="inspectModel";break;case"inf_work_record":this.tabview="workRecordModel";break;case"inf_internal_inspection_audit":this.tabview="InternalInspectionAndAuditModel";break;case"inf_report_material":this.tabview="reportMaterialModel";break;case"inf_risk_events":this.tabview="riskEventsModel";break;case"inf_public_opinion_monitoring":this.tabview="publicOpinionMonitoringModel";break;case"inf_institutional_risk_management":this.tabview="InstitutionalRiskManagementModel";break;case"inf_process":this.tabview="processpageModel";break;default:return}var n=this.$route.query.documentId;this.axios.post("/bpm/getTaskDirective?documentId="+n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){"2"==e.data.optType?(a.processval={bpmBusId:l,documentId:o,table:i,busId:s,addormobile:d,id:r,modelFlag:"详情"},a.processModel=!0):"1"==e.data.optType&&(a.processval={bpmBusId:l,documentId:o,table:i,busId:s,addormobile:d,id:r,modelFlag:"编辑"},a.processModel=!0)}).catch(function(e){})}},fileDownload:function(e){var a=this,t=new FormData,l=this.uploadList[e].name;t.append("fileId",this.uploadList[e].url),this.axios.post("/bpm/download",t,{headers:{"Content-Type":"multipart/form-data"},responseType:"blob"}).then(function(e){a.download(e,l)}).catch(function(e){})},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},taskBtnFun:function(e){var a=this,t={documentId:JSON.parse(this.uploadParams.params).documentId,approveNote:this[e].desc,approveResult:this[e].gender,returnData:!0,username:"",usernames:this[e].treeArr1,id:""};t=s()(t),this.$refs[e].validate(function(l){if(l&&"0"==a[e].gender)a.axios.post("/process/audit/doContentSubmit",t,{headers:{"Content-Type":"application/json"}}).then(function(e){e&&"200"==e.code?(a.$Message.info("提交成功"),a.$router.push({name:"processAuditExtrackApply"})):a.$Message.info(e.message)}).catch(function(e){});else if(l&&"1"==a[e].gender){var i=o()({},a.treeParam);if(0==a[e].desc.trim().length)return a.$Message.info("请填写退回意见"),!1;i.approveNote=a[e].desc,i.approveResult=a[e].gender,a.axios.post("/process/audit/doContentSubmit",s()(i),{headers:{"Content-Type":"application/json"}}).then(function(e){e&&"200"==e.code?(a.$Message.info("提交成功"),a.$router.push({name:"processAuditExtrackApply"})):a.$Message.info(e.message)}).catch(function(e){})}})},doTransSubmit:function(e){var a=this;this.$refs[e].validate(function(t){if(t){var l={documentId:JSON.parse(a.uploadParams.params).documentId,approveNote:a[e].desc,approveResult:"",currentUser:a.treeParam.currentUser,returnData:!0,targetUser:a[e].treeArr1,taskId:!0};a.axios.post("/extract/task/doTransSubmit",s()(l),{headers:{"Content-Type":"application/json"}}).then(function(e){e&&"200"==e.code?(a.$Message.info("提交成功"),a.$router.push({name:"processAuditExtrackApply"})):a.$Message.info("提交失败")}).catch(function(e){a.$Message.info("提交失败")})}})},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},updateNextUserInfo:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidate.treeArr1="",e.forEach(function(e){1==e.checked&&(t.formValidate.treeArr1=e.code)}),this.$refs.formValidate.validateField("treeArr1")},updateNextUserInfo2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidate2.treeArr1="",e.forEach(function(e){1==e.checked&&(t.formValidate2.treeArr1=e.code)}),this.$refs.formValidate2.validateField("treeArr1")},handleUploadfile:function(e){var a=this,t=0;return this.uploadList.forEach(function(e){parseInt(e.activityId)==parseInt(JSON.parse(a.uploadParams.params).activityId)&&t++}),(t=t<5)||this.$Notice.warning({title:"当前节点只能上传最多五个附件."}),t},handleSuccess:function(e,a){"200"==e.code&&(a.url=e.data.dataVo.files[0].id,a.creatorName=e.data.dataVo.files[0].creatorName,a.activityId=e.data.dataVo.files[0].activityId)},handleError:function(){this.$Message.error("上传失败")}}},C={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{position:"relative"}},[e._m(0),e._v(" "),t("div",{staticClass:"contentCellBox"},[t("div",{staticClass:"contentCellBody"},[t("div",[e._m(1),e._v(" "),t("Row",[t("table",{staticClass:"tableBox",staticStyle:{"margin-top":"0"}},[t("thead",[t("tr",e._l(e.tableHeader,function(a){return t("td",[e._v(e._s(a.name))])}),0)]),e._v(" "),t("tbody",[t("tr",e._l(e.tableBody,function(a){return t("td",{staticClass:"textMaxWidth textOverflow",class:{spanBox:a.assistFlag},attrs:{title:a.assistFlag?a.val:""},on:{click:function(t){return e.showDialog(a)}}},[e._v(e._s(a.val))])}),0)])])]),e._v(" "),e._m(2),e._v(" "),t("Row",[t("table",{staticClass:"tableBox",staticStyle:{"margin-top":"0"}},[t("thead",[t("tr",[t("td",[e._v("流程名称")]),e._v(" "),t("td",{attrs:{colspan:"8"}},[e._v(e._s(e.processTable.name))])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("流程步骤")]),e._v(" "),t("td",[e._v("发起时间")]),e._v(" "),t("td",[e._v("结束时间")]),e._v(" "),t("td",[e._v("办理人")]),e._v(" "),t("td",[e._v("办理人部门")]),e._v(" "),t("td",[e._v("结果")]),e._v(" "),t("td",[e._v("意见")]),e._v(" "),t("td",[e._v("下一步骤")]),e._v(" "),t("td",[e._v("下一处理人")])]),e._v(" "),e._l(e.processTable.content,function(a,l){return t("tr",{key:l},[t("td",[e._v(e._s(a.actionName))]),e._v(" "),t("td",[e._v(e._s(a.startTime))]),e._v(" "),t("td",[e._v(e._s(a.endTime))]),e._v(" "),t("td",[e._v(e._s(a.userName))]),e._v(" "),t("td",[e._v(e._s(a.userDeptName))]),e._v(" "),t("td",[e._v(e._s(0==a.approveResult||"null"==a.approveResult?"审核通过":"审核退回"))]),e._v(" "),t("td",{staticClass:"opinions",attrs:{title:"null"==a.approveNote?"通过":a.approveNote}},[e._v(e._s("null"==a.approveNote?"通过":a.approveNote))]),e._v(" "),t("td",[e._v(e._s(a.nextActivityName))]),e._v(" "),t("td",[e._v(e._s(a.nextUserName))])])})],2)])]),e._v(" "),e._m(3),e._v(" "),t("Row",[t("Upload",{ref:"upload",attrs:{multiple:"",type:"drag","show-upload-list":!1,data:e.uploadParams,"default-file-list":e.defaultList,format:["zip","rar","xls","xlsx","doc","docx","pdf"],"max-size":10240,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleUploadfile,action:e.axios.defaults.baseURL+"/bpm/upload","on-success":e.handleSuccess,"on-error":e.handleError}},[t("div",{staticStyle:{padding:"20px 0"}},[t("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),t("p",[e._v("请上传附件")])],1)]),e._v(" "),t("div",[e._v("上传格式为zip、rar、xls、xlsx、doc、docx、pdf，且大小不超过10MB")])],1),e._v(" "),t("Table",{attrs:{border:"",columns:e.columns1,data:e.uploadList}})],1),e._v(" "),t("div",[t("Row",{staticClass:"tabBox"},[t("div",{staticClass:"taskAuditDataExtraction-right-cell"},[t("div",{staticClass:"taskAuditDataExtraction-right-cell1"},[e._v("提示：")]),e._v(" "),t("div",{staticClass:"taskAuditDataExtraction-right-cell2 flexStart"},[t("div",{staticClass:"taskAuditDataExtraction-right-cell2-cell"},[t("span",[e._v("当前处于：")]),e._v(" "),t("span",[e._v(e._s(e.nextActivityName))])]),e._v(" "),t("div",{staticClass:"taskAuditDataExtraction-right-cell2-cell"},[t("span",[e._v("当前处理人：")]),e._v(" "),t("span",[e._v(e._s(e.nextUserName))])])])]),e._v(" "),t("Row",{staticStyle:{padding:"0 5px"}},[t("Tabs",{attrs:{value:"name1",animated:!1},on:{"on-click":e.swithTab},model:{value:e.tabname,callback:function(a){e.tabname=a},expression:"tabname"}},[t("TabPane",{attrs:{label:"审核",name:"name1"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":5}},[t("div",{staticClass:"taskAuditDataExtraction-right-cell1"},[e._v("意见：")]),e._v(" "),t("FormItem",{attrs:{label:"",prop:"desc"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入审核意见"},model:{value:e.formValidate.desc,callback:function(a){e.$set(e.formValidate,"desc",a)},expression:"formValidate.desc"}})],1),e._v(" "),t("div",{staticClass:"taskAuditDataExtraction-right-cell1"},[e._v("下一步操作：")]),e._v(" "),t("FormItem",{attrs:{label:"",prop:"gender"}},[t("RadioGroup",{model:{value:e.formValidate.gender,callback:function(a){e.$set(e.formValidate,"gender",a)},expression:"formValidate.gender"}},[t("Radio",{attrs:{label:"0"}},[e._v("审核通过")]),e._v(" "),e.taskrebuton?t("Radio",{attrs:{label:"1"}},[e._v("审核退回")]):e._e()],1)],1),e._v(" "),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.showTree1Flg&&e.lastStepFlag,expression:"showTree1Flg && lastStepFlag"}],attrs:{label:"",prop:"treeArr1"}},[t("Tree",{ref:"treeRef",attrs:{data:e.treeArr1,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUserInfo}})],1),e._v(" "),t("Row",{staticClass:"flexCenter"},[t("Button",{staticStyle:{width:"100px",margin:"20px"},attrs:{type:"primary",shape:"circle"},on:{click:function(a){return e.taskBtnFun("formValidate")}}},[e._v("提交")])],1)],1)],1),e._v(" "),t("TabPane",{attrs:{label:"转办",name:"name2"}},[t("div",{staticClass:"taskAuditDataExtraction-right-cell1"},[e._v("意见：")]),e._v(" "),t("Form",{ref:"formValidate2",attrs:{model:e.formValidate2,rules:e.ruleValidate2,"label-width":5}},[t("FormItem",{attrs:{label:"",prop:"desc"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入审核意见"},model:{value:e.formValidate2.desc,callback:function(a){e.$set(e.formValidate2,"desc",a)},expression:"formValidate2.desc"}})],1),e._v(" "),t("div",{staticClass:"taskAuditDataExtraction-right-cell1"},[e._v("转办人员：")]),e._v(" "),t("FormItem",{attrs:{label:"",prop:"treeArr1"}},[t("Tree",{ref:"treeRef",attrs:{data:e.treeArr2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUserInfo2}})],1),e._v(" "),t("Row",{staticClass:"flexCenter"},[t("Button",{staticStyle:{width:"100px",margin:"20px"},attrs:{type:"primary",shape:"circle"},on:{click:function(a){return e.doTransSubmit("formValidate2")}}},[e._v("提交")])],1)],1)],1)],1)],1)],1),e._v(" "),t("div",{staticStyle:{width:"100%",height:"200px"}})],1)])]),e._v(" "),t("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:"任务详情",styles:{width:"80%"}},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[t(e.tabview,{key:e.batchId,tag:"component",attrs:{"data-objj":e.dataObjj,dataObj:e.dataObj,width:"80%"}}),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),t("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:"任务详情",styles:{width:"80%"}},model:{value:e.processModel,callback:function(a){e.processModel=a},expression:"processModel"}},[e.processModel?t(e.tabview,{tag:"component",attrs:{processdate:e.processval,width:"80%"},on:{closeModel:e.closemodelfun}}):e._e(),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("div",{staticClass:"topTitle"},[l("span",{staticClass:"topTitle-span1"},[e._v("审核任务")]),e._v(" "),l("span",{staticClass:"topTitle-span1"},[l("img",{attrs:{src:t("Dh6M"),alt:""}})]),e._v(" "),l("span",{staticClass:"topTitle-span1"},[e._v("过程内容审核任务")]),e._v(" "),l("span",{staticClass:"topTitle-span1"},[l("img",{attrs:{src:t("Dh6M"),alt:""}})]),e._v(" "),l("span",{staticClass:"topTitle-span1"},[e._v("评估待审核")]),e._v(" "),l("div",{staticClass:"button-content"})])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),this._v("确认信息\n          ")])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),this._v("流程信息\n          ")])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),this._v("上传附件\n          ")])}]};var y=t("C7Lr")(V,C,!1,function(e){t("WI+r")},"data-v-f20e7628",null);a.default=y.exports},"i+hA":function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("VU7F"),s=t("lvfI"),d=t("fYFQ"),r=t.n(d),n=(t("Kmkn"),{components:{Treeselect:r.a,showUsualFiles:s.a,processMessage:i.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE,PROCESS_REMEDIATION_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE,l.reformResults=e.data.PROCESS_REMEDIATION_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}},"formValidateModel1.val3":function(e,a){this.$refs.formValidateModel1.validateField("val3")},"formValidateModel1.val4":function(e,a){this.$refs.formValidateModel1.validateField("val4")}},data:function(){var e=this;return{buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,reformResults:[],delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(a,t,l){if(""==e.taskPeipleModelData2.nextUser&&e.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1,appendFlag:!1,addFlagShow:!1,modifyFlagShow:!1,modal1:!1,modalDisableFlag:!0,formValidateModel1:{bpmTitle:"",val1:"",val2:["",""],val3:null,val4:[],val5:"",val6:"",val7:"",val8:"",val9:"",val10:!0,val11:"",nextUser:"",appendAttachId:""},businessDeptList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],tableHeader:[{name:"序"},{name:"操作"},{name:"检查通知书号"},{name:"检查时间"},{name:"主查单位"},{name:"被查单位"},{name:"检查中发现的主要问题"},{name:"对机构处罚金额（人民币万元）"},{name:"处罚人数"},{name:"对个人处罚金额（人民币万元）"},{name:"整改情况"},{name:"状态"},{name:"是否公开"},{name:"附件"},{name:"管理部门"},{name:"追加信息"},{name:"创建时间"},{name:"创建人"},{name:"更新时间"},{name:"更新人"}],tableBody:[],formValidate:{checkTime:["",""],implementUnit:[],inspectedUnit:[],reformResult:"",flag:"",manager:[]},ruleValidate:{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],nextUser:[{required:!1,validator:function(a,t,l){if(""==e.formValidateModel1.nextUser&&e.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,validator:function(a,t,l){if(""==e.formValidateModel1.val2[0])return l(new Error("请选择时间"));l()},trigger:"on-change"}],val3:[{required:!0,validator:function(a,t,l){if(null==e.formValidateModel1.val3&&e.modal1)return l(new Error("请选择主查单位"));l()},trigger:"xxxx"}],val4:[{required:!0,validator:function(a,t,l){if(0==e.formValidateModel1.val4.length&&e.modal1)return l(new Error("请至少选择一个被查单位"));l()},trigger:"xxxx"}],val5:[{required:!1,pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"请输入金额",trigger:"blur"},{max:29,message:"输入长度过长",trigger:"blur"}],val6:[{required:!1,pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"请输入金额",trigger:"blur"},{max:29,message:"输入长度过长",trigger:"blur"}],val7:[{required:!1,pattern:/^[1-9]+[0-9]*$/,message:"请输入数字",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val8:[{type:"string",max:512,message:"您超出了范围",trigger:"blur"}],val9:[{type:"string",max:512,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}]}}},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={maxCheckEndTime:this.formValidate.checkTime[1],maxCheckStartTime:this.formValidate.checkTime[1],minCheckEndTime:this.formValidate.checkTime[0],minCheckStartTime:this.formValidate.checkTime[0],implementUnit:o()(this.formValidate.implementUnit),inspectedUnit:o()(this.formValidate.inspectedUnit),manager:o()(this.formValidate.manager),flag:this.formValidate.flag,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infCheck/getInfCheckExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infCheck/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.fileNum,t.watchTableCell.val2=[e.data.checkStartTime,e.data.checkEndTime],t.watchTableCell.val3=e.data.implementUnit,t.watchTableCell.val4=e.data.inspectedUnit,t.watchTableCell.val5=e.data.penaltyAmountOrg,t.watchTableCell.val6=e.data.penaltyAmountPerson,t.watchTableCell.val7=e.data.punishedNum,t.watchTableCell.val8=e.data.findProblems,t.watchTableCell.val9=e.data.reformResult,t.watchTableCell.val10=e.data.ifShow,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,fileNum:a.formValidateModel1.val1,checkStartTime:a.formValidateModel1.val2[0],checkEndTime:a.formValidateModel1.val2[1],implementUnit:a.formValidateModel1.val3,inspectedUnit:o()(a.formValidateModel1.val4),penaltyAmountOrg:a.formValidateModel1.val5,penaltyAmountPerson:a.formValidateModel1.val6,punishedNum:a.formValidateModel1.val7,findProblems:a.formValidateModel1.val8,reformResult:a.formValidateModel1.val9,ifShow:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infCheck/updateInfCheck",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infCheck/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=e.data.fileNum,a.formValidateModel1.val2=[e.data.checkStartTime,e.data.checkEndTime],a.formValidateModel1.val3=e.data.implementUnit,a.formValidateModel1.val4=JSON.parse(e.data.inspectedUnit),a.formValidateModel1.val5=e.data.penaltyAmountOrg,a.formValidateModel1.val6=e.data.penaltyAmountPerson,a.formValidateModel1.val7=e.data.punishedNum,a.formValidateModel1.val8=e.data.findProblems,a.formValidateModel1.val9=e.data.reformResult,a.formValidateModel1.val10=JSON.parse(e.data.ifShow),a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":200}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"检查通知书号",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"检查时间",prop:"val2"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",value:e.formValidateModel1.val2,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":e.datechange2}})],1),e._v(" "),t("FormItem",{attrs:{label:"主查单位",prop:"val3"}},[t("treeselect",{attrs:{multiple:!1,options:e.data1,disabled:this.addFlag,placeholder:"请选择","max-height":100},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"被查单位",prop:"val4"}},[t("treeselect",{attrs:{multiple:!0,options:e.data1,disabled:this.addFlag,placeholder:"请选择","max-height":100},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"对机构处罚金额(人民币万元)",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"对个人处罚金额(人民币万元)",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"处罚人数",prop:"val7"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}})],1),e._v(" "),t("FormItem",{attrs:{label:"检查中发现的主要问题",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"整改情况",prop:"val9"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":200}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"检查通知书号："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"检查时间："}},[t("label",[e._v(e._s(e.watchTableCell.val2[0])+"~"+e._s(e.watchTableCell.val2[1]))])]),e._v(" "),t("FormItem",{attrs:{label:"主查单位："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"被查单位："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"对机构处罚金额(人民币万元)："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"对个人处罚金额(人民币万元)："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"处罚人数："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"检查中发现的主要问题："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val8}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val8))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"整改情况"}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val9}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val9))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val10?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val1}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var p=t("C7Lr")(n,c,!1,function(e){t("aaf0")},"data-v-26d3e1d4",null);a.a=p.exports},jETw:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:!0,val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"状态"},{name:"是否公开"},{name:"管理部门"},{name:"追加内容"},{name:"附件"},{name:"发布人"},{name:"发布时间"},{name:"更新人"},{name:"更新时间"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val11:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,flag:this.formValidate.val3,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infInstitutionalRiskManagement/getInfInstitutionalRiskManagementExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infInstitutionalRiskManagement/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.ifShow,t.watchTableCell.val3=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,ifShow:a.formValidateModel1.val2,content:a.formValidateModel1.val3,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infInstitutionalRiskManagement/updateInfInstitutionalRiskManagement",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPubTime=e[0],this.maxPubTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infInstitutionalRiskManagement/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=JSON.parse(e.data.ifShow),a.formValidateModel1.val3=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val2?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("L9x4")},"data-v-9615e97c",null);a.a=h.exports},uXve:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}},"formValidateModel1.val1":function(e,a){this.$refs.formValidateModel1.validateField("val1")}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:["",""],val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:"",nextUser:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minTrainTime:"",maxTrainTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:[],val2:"",val3:["",""],val4:"",val5:"",val6:"",val7:"",val8:"",val9:!0,val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"培训主办单位"},{name:"参训对象"},{name:"培训时间"},{name:"培训方式"},{name:"培训天数"},{name:"培训人次"},{name:"培训内容"},{name:"培训效果"},{name:"状态"},{name:"是否公开"},{name:"编辑内容"},{name:"附件"},{name:"管理部门 "},{name:"追加信息"},{name:"创建时间"},{name:"创建人 "},{name:"更新时间 "},{name:"更新人 "}]),s()(e,"tableBody",[]),s()(e,"formValidate",{val1:[],val2:[],val3:"",val4:"",val5:"",val6:""}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"请选择机构",validator:function(e,t,l){if(0==a.formValidateModel1.val1.length&&a.modal1)return l(new Error("请选择"));l()},trigger:"xxxx"}],val2:[{required:!0,message:"此项不能为空",trigger:"blur"}],val3:[{required:!0,validator:function(e,a,t){if(Array.isArray(a))a.map(function(e){if(""===e)return t("日期不能为空")});else if(""===a)return t("日期不能为空");return t()},trigger:"change"}],val4:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:29,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,message:"此项不能为空",trigger:"blur"},{pattern:/^(([1-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,message:"格式不正确",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"blur"},{pattern:/^[0-9]*[0-9][0-9]*$/,message:"格式不正确",trigger:"blur"},{max:7,message:"输入长度过长",trigger:"blur"}],val7:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val8:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={hostUnit:this.formValidate.val1,minTrainStartTime:this.minTrainTime,maxTrainEndTime:this.maxTrainTime,trainType:this.formValidate.val3,trainContent:this.formValidate.val4,flag:this.formValidate.val5,ifShow:this.formValidate.val6,ifExacte:this.ifExacte,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infTrain/getInfTrainExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infTrain/getEntityRow/"+e+"?decode=1").then(function(e){"200"==e.code&&(t.watchTableCell.attachId=e.data.attachId,t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.hostUnit,t.watchTableCell.val2=e.data.trainee,t.watchTableCell.val3=[],t.watchTableCell.val3.push(e.data.trainStartTime),t.watchTableCell.val3.push(e.data.trainEndTime),t.watchTableCell.val4=e.data.trainType,t.watchTableCell.val5=e.data.trainDays,t.watchTableCell.val6=e.data.trainNum,t.watchTableCell.val7=e.data.trainContent,t.watchTableCell.val8=e.data.trainResult,t.watchTableCell.val9=e.data.ifShow,t.watchTableCell.val10=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1,worfFlow:!0},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1,worfFlow:!0},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,hostUnit:a.formValidateModel1.val1,trainee:a.formValidateModel1.val2,trainStartTime:a.formValidateModel1.val3[0],trainEndTime:a.formValidateModel1.val3[1],trainType:a.formValidateModel1.val4,trainDays:a.formValidateModel1.val5,trainNum:a.formValidateModel1.val6,trainContent:a.formValidateModel1.val7,trainResult:a.formValidateModel1.val8,ifShow:a.formValidateModel1.val9,content:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infTrain/updateInfTrain",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minTrainTime=e[0],this.maxTrainTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infTrain/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.formValidateModel1.val1=JSON.parse(e.data.hostUnit),a.formValidateModel1.val2=e.data.trainee,a.formValidateModel1.val3=[],a.formValidateModel1.val3.push(e.data.trainStartTime),a.formValidateModel1.val3.push(e.data.trainEndTime),a.formValidateModel1.val4=e.data.trainType,a.formValidateModel1.val5=e.data.trainDays,a.formValidateModel1.val6=e.data.trainNum,a.formValidateModel1.val7=e.data.trainContent,a.formValidateModel1.val8=e.data.trainResult,a.formValidateModel1.val9=JSON.parse(e.data.ifShow),a.formValidateModel1.val10=e.data.content,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":180}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训主办单位：",prop:"val1"}},[t("treeselect",{attrs:{multiple:!0,options:e.data1,placeholder:"请选择","max-height":100,disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"参训对象",prop:"val2"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训时间",prop:"val3"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"",value:e.formValidateModel1.val3,disabled:this.addFlag},on:{"on-change":function(a){e.formValidateModel1.val3=a}}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训方式",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训天数",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训人次",prop:"val6"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训内容",prop:"val7"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}})],1),e._v(" "),t("FormItem",{attrs:{label:"培训效果",prop:"val8"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val10"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"培训主办单位："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val1}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val1))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"参训对象："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"培训时间："}},[t("label",[e._v(e._s(e.watchTableCell.val3[0])+"~"+e._s(e.watchTableCell.val3[1]))])]),e._v(" "),t("FormItem",{attrs:{label:"培训方式："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"培训天数："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"培训人次："}},[t("label",[e._v(e._s(e.watchTableCell.val6))])]),e._v(" "),t("FormItem",{attrs:{label:"培训内容："}},[t("label",[e._v(e._s(e.watchTableCell.val7))])]),e._v(" "),t("FormItem",{attrs:{label:"培训效果："}},[t("label",[e._v(e._s(e.watchTableCell.val8))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("label",[e._v(e._s("true"==e.watchTableCell.val9?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val10}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val10))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("0mco")},"data-v-5f0cee36",null);a.a=h.exports},wfNM:function(e,a){},y93s:function(e,a,t){"use strict";var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},props:["processdate"],created:function(){if(this.processdate)if("编辑"==this.processdate.modelFlag){if("addFlag"==this.processdate.addormobile||"modifyFlag"==this.processdate.addormobile){var e=this.processdate.id;this.addfun(e),this.contentFlag1=!0}}else if("详情"==this.processdate.modelFlag){var a=this.processdate.id,t=this.processdate.busId;this.watchTableCellFun(a,t),this.contentFlag2=!0}var l=this;this.axios.post("/system/unit/getExtractUnit").then(function(e){"200"==e.code&&(l.selectTreeCleanUp(e.data),l.data1=e.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(e){"200"==e.code&&(l.PROCESS_CHECK_STATE=e.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,contentFlag1:!1,contentFlag2:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minPubTime:"",maxPubTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:!0,val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"open",val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"标题"},{name:"状态"},{name:"是否公开"},{name:"管理部门"},{name:"追加信息"},{name:"附件"},{name:"发布人"},{name:"发布时间"},{name:"更新人"},{name:"更新时间"}]),s()(e,"tableBody",[]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"},{max:250,message:"输入长度过长",trigger:"blur"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val11:[{max:1e3,message:"输入长度过长",trigger:"blur"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{closeFather:function(){this.$emit("closeModel")},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,flag:this.formValidate.val3,ifExacte:this.ifExacte,minPubTime:this.minPubTime,maxPubTime:this.maxPubTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infPublicOpinionMonitoring/getInfPublicOpinionMonitoringExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xlsx")}).catch(function(e){})},showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:e,showFlag:!1,disabled:!1},this.fileId6=e.busId,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a){var t=this;this.axios.post("/process/infPublicOpinionMonitoring/getEntityRow/"+e).then(function(e){"200"==e.code&&(t.watchTableCell.bpmTitle=e.data.bpmTitle,t.watchTableCell.val1=e.data.title,t.watchTableCell.val2=e.data.ifShow,t.watchTableCell.val3=e.data.content,t.dataObj4={data:e.data,showFlag:!1,disabled:!1},t.fileId4=e.data.busId)}).catch(function(e){});var l={relationBusId:a};l=o()(l),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.appendId=e.data.id,t.watchTableCell.val11=e.data.content,t.dataObj5={data:e.data,showFlag:!1,disabled:!1},t.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)})},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,ifShow:a.formValidateModel1.val2,content:a.formValidateModel1.val3,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};t=o()(t),a.axios.post("/process/infPublicOpinionMonitoring/updateInfPublicOpinionMonitoring",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.buttonDisabled=!1,a.$Message.info("保存成功"),a.modal1=!1,a.taskPeipleModel=!1,a.closeFather())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minPubTime=e[0],this.maxPubTime=e[1]},addfun:function(e){var a=this;this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=e,this.axios.post("/process/infPublicOpinionMonitoring/getEntityRow/"+e).then(function(e){"200"==e.code&&(a.formValidateModel1.attachId=e.data.attachId,a.formValidateModel1.val1=e.data.title,a.formValidateModel1.val2=JSON.parse(e.data.ifShow),a.formValidateModel1.val3=e.data.content,a.formValidateModel1.bpmTitle=e.data.bpmTitle,a.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},a.fileId=e.data.busId)}).catch(function(e){})},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){}}}),m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[e.contentFlag1?t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"标题",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val2,callback:function(a){e.$set(e.formValidateModel1,"val2",a)},expression:"formValidateModel1.val2"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val3"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val3,callback:function(a){e.$set(e.formValidateModel1,"val3",a)},expression:"formValidateModel1.val3"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v("下一步")]),e._v(" "),t("Button",{on:{click:e.closeFather}},[e._v("取消")])],1)])],1):e._e(),e._v(" "),e.contentFlag2?t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"标题："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val2?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val3}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val3))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1):e._e()])},staticRenderFns:[]};var h=t("C7Lr")(p,m,!1,function(e){t("ECcR")},"data-v-7b13a27e",null);a.a=h.exports}});
//# sourceMappingURL=1.af91a9d2292e372241531577069638620.js.map