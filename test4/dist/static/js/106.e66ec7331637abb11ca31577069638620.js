webpackJsonp([106],{"66eB":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("3cXf"),o=t.n(l),i=t("a3Yh"),s=t.n(i),d=t("VU7F"),r=t("lvfI"),n=t("fYFQ"),c=t.n(n),p=(t("Kmkn"),{components:{Treeselect:c.a,showUsualFiles:r.a,processMessage:d.a},created:function(){this.tableList();var e=this;this.axios.post("/system/unit/getExtractUnit").then(function(a){"200"==a.code&&(e.selectTreeCleanUp(a.data),e.data1=a.data)}).catch(function(e){}),this.axios.get("/system/getDic/PROCESS_CHECK_STATE").then(function(a){"200"==a.code&&(e.PROCESS_CHECK_STATE=a.data.PROCESS_CHECK_STATE)}).catch(function(e){})},watch:{modal1:function(e){0==e&&(this.$refs.formValidateModel1.resetFields(),this.taskPeipleModel=!1,this.fileId=!this.fileId,this.taskPeipleModel=!1)},"$store.state.firstLoginFlag":{handler:function(e){this.firstLoginFlag=e}}},data:function(){var e,a=this;return e={buttonDisabled:!1,firstLoginFlag:this.$store.state.firstLoginFlag,showModal:!1,delateId:"",taskPeipleModel2:!1,taskPeipleModelData2:{nextUser:""},ruleValidate2:{nextUser:[{required:!1,validator:function(e,t,l){if(""==a.taskPeipleModelData2.nextUser&&a.taskPeipleModel2)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}]},tableHeaderAppend:[{name:"序"},{name:"追加内容"},{name:"追加附件"},{name:"所属部门"},{name:"操作时间"},{name:"操作人员"}],tableBodyAppend:[{content:"",dept:"",createTime:"",creator:""}],watchAppenModelAppendFileModel:!1,watchAppenModel:!1,watchTableCell:{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:"",val10:"",val11:""},bpmName:"",appendId:"",appendbusId:"",fileId6:!0,dataObj6:{},fileId5:!0,dataObj5:{},fileId4:!0,dataObj4:{},watchTableCellDitalModel:!1,fileId3:!0,dataObj3:{},watchFileModel:!1,fileId2:!0,dataObj2:{},buttonVal:"",modifyid:"",fileId:!0,dataObj:{},uploadList6:[],uploadList5:[],uploadList4:[],uploadList3:[],uploadList2:[],uploadList:[],defaultList:[],data2:[],taskPeipleModel:!1,PROCESS_CHECK_STATE:[],data1:[],ifExacte:"0",minEnabledTime:"",maxEnabledTime:"",pageSize:10,total:0,pageNum:1,addFlag:!1,modifyFlag:!1},s()(e,"modifyFlag",!1),s()(e,"appendFlag",!1),s()(e,"addFlagShow",!1),s()(e,"modifyFlagShow",!1),s()(e,"modal1",!1),s()(e,"modalDisableFlag",!0),s()(e,"formValidateModel1",{bpmTitle:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:"",val7:"",val8:"",val9:!0,val10:"",val11:"",nextUser:"",appendAttachId:""}),s()(e,"businessDeptList",[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]),s()(e,"tableHeader",[{name:"序"},{name:"操作"},{name:"制度全称"},{name:"制度实施时间"},{name:"制度失效时间"},{name:"制定单位"},{name:"相关文号"},{name:"是否年内新建"},{name:"是否年内修订"},{name:"是否报备"},{name:"状态"},{name:"信息显示"},{name:"附件"},{name:"管理部门"},{name:"追加信息 "},{name:"发布时间 "},{name:"发布人 "},{name:"更新时间 "},{name:"更新人 "}]),s()(e,"tableBody",[{id:"",title:"",enabledTime:"",diabledTime:"",creator:"",fileNum:"",ifYearNew:"",ifYearRevise:"",ifReport:"",flag:"",ifShow:"",manager:"",pubTime:"",pubUser:"",updateTime:"",updater:""}]),s()(e,"formValidate",{value2:"",val1:"",val2:"",val3:"",val4:"",val5:"",val6:[]}),s()(e,"ruleValidate",{bpmTitle:[{required:!0,message:"此项不能为空",trigger:"blur"},{type:"string",max:50,message:"最大输入长度不能超过50字",trigger:"blur"}],val10:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],val11:[{type:"string",max:1e3,message:"您超出了范围",trigger:"blur"}],nextUser:[{required:!1,validator:function(e,t,l){if(""==a.formValidateModel1.nextUser&&a.taskPeipleModel)return l(new Error("请选择一个人"));l()},trigger:"on-check-change"}],val1:[{required:!0,message:"此项不能为空",trigger:"blur"},{max:125,message:"输入长度过长",trigger:"blur"}],val2:[{required:!0,message:"此项不能为空",trigger:"change"}],val3:[{required:!0,message:"此项不能为空",trigger:"change"}],val4:[{required:!0,message:"此项不能为空",trigger:"change"},{max:125,message:"输入长度过长",trigger:"blur"}],val5:[{required:!0,message:"此项不能为空",trigger:"change"},{max:125,message:"输入长度过长",trigger:"blur"}],val6:[{required:!0,message:"此项不能为空",trigger:"change"}],val7:[{required:!0,message:"此项不能为空",trigger:"change"}],val8:[{required:!0,message:"此项不能为空",trigger:"change"}],val9:[{required:!1,message:"此项不能为空",trigger:"change"}],Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}),e},methods:{showProcess:function(e){this.showModal=!0,this.dataObj={businessId:e.bpmBusId,name:"过程管理"}},download:function(e,a){if(e){var t=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=t,l.setAttribute("download",a),document.body.appendChild(l),l.click()}},exportFn:function(){var e=this,a={title:this.formValidate.val1,enabledTime:this.formValidate.value2,creator:this.formValidate.val2,ifReport:this.formValidate.val3,flag:this.formValidate.val4,ifShow:this.formValidate.val5,manager:this.formValidate.val6,ifExacte:this.ifExacte,minEnabledTime:this.minEnabledTime,maxEnabledTime:this.maxEnabledTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infInternalControl/getInfInternalControlExcelList",a,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(a){e.download(a,"导出文档.xls")}).catch(function(e){})},treeNLeafNodeDisable:function(e){for(var a=0;a<e.length;a++)e[a].children&&(this.$set(e[a],"expand",!0),this.$set(e[a],"disabled",!0),this.treeNLeafNodeDisable(e[a].children))},watchAppenModelAppendFile:function(e){this.dataObj6={data:{busId:e},showFlag:!1,disabled:!1},this.fileId6=e,this.watchAppenModelAppendFileModel=!0},watchAppendFun:function(e,a,t){var l=this,i={id:t,relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendList",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.tableBodyAppend=e.data)}).catch(function(e){}),this.watchAppenModel=!0},watchTableCellFun:function(e,a,t){var l=this;this.axios.post("/process/infInternalControl/getEntityRow/"+t).then(function(e){"200"==e.code&&(l.watchTableCell.bpmTitle=e.data.bpmTitle,l.watchTableCell.val1=e.data.title,l.watchTableCell.val2=e.data.enabledTime,l.watchTableCell.val3=e.data.diabledTime,l.watchTableCell.val4=e.data.creator,l.watchTableCell.val5=e.data.fileNum,l.watchTableCell.val6=e.data.ifYearNew,l.watchTableCell.val7=e.data.ifYearRevise,l.watchTableCell.val8=e.data.ifReport,l.watchTableCell.val9=e.data.ifShow,l.watchTableCell.val10=e.data.content,l.dataObj4={data:e.data,showFlag:!1,disabled:!1},l.fileId4=e.data.busId)}).catch(function(e){});var i={relationBusId:a};i=o()(i),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",i,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(l.appendId=e.data.id,l.watchTableCell.val11=e.data.content,l.dataObj5={data:e.data,showFlag:!1,disabled:!1},l.fileId5=e.data.busId)}).catch(function(e){}),this.watchTableCellDitalModel=!0},watchFileFun:function(e,a,t){this.dataObj3={showFlag:!1,data:t,disabled:!1},this.fileId3=e,this.watchFileModel=!0},receiveUploadList:function(e){var a=this;this.uploadList=[],e.forEach(function(e){a.uploadList.push(e.url)}),this.formValidateModel1.attachId=this.uploadList},receiveUploadList2:function(e){var a=this;this.uploadList2=[],e.forEach(function(e){a.uploadList2.push(e.url)}),this.formValidateModel1.appendAttachId=this.uploadList2},receiveUploadList3:function(e){var a=this;this.uploadList3=[],e.forEach(function(e){a.uploadList3.push(e.url)}),this.formValidateModel1.attachId=this.uploadList3},receiveUploadList4:function(e){var a=this;this.uploadList4=[],e.forEach(function(e){a.uploadList4.push(e.url)}),this.formValidateModel1.attachId=this.uploadList4},receiveUploadList5:function(e){var a=this;this.uploadList5=[],e.forEach(function(e){a.uploadList5.push(e.url)}),this.formValidateModel1.attachId=this.uploadList5},receiveUploadList6:function(e){var a=this;this.uploadList6=[],e.forEach(function(e){a.uploadList6.push(e.url)}),this.formValidateModel1.attachId=this.uploadList6},handleSubmitLast2:function(e){var a=this,t={id:e};t=o()(t),this.axios.post("/process/infInternalControl/deleteInfInternalControl",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.taskPeipleModel2=!1,a.tableList())}).catch(function(e){})},handleSubmitLast:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(0==a.addFlagShow&&0==a.modifyFlagShow&&0==a.addFlag){a.buttonDisabled=!0;var t={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,enabledTime:a.formValidateModel1.val2,diabledTime:a.formValidateModel1.val3,creator:a.formValidateModel1.val4,fileNum:a.formValidateModel1.val5,ifYearNew:a.formValidateModel1.val6,ifYearRevise:a.formValidateModel1.val7,ifReport:a.formValidateModel1.val8,ifShow:a.formValidateModel1.val9,content:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId};t=o()(t),a.axios.post("/process/infInternalControl/addInfInternalControl",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.buttonDisabled=!1,a.modal1=!1,a.taskPeipleModel=!1,a.tableList())}).catch(function(e){a.buttonDisabled=!1})}else if(0==a.addFlagShow&&1==a.modifyFlagShow&&0==a.addFlag){a.buttonDisabled=!0;var l={bpmTitle:a.formValidateModel1.bpmTitle,bpmName:a.bpmName,title:a.formValidateModel1.val1,enabledTime:a.formValidateModel1.val2,diabledTime:a.formValidateModel1.val3,creator:a.formValidateModel1.val4,fileNum:a.formValidateModel1.val5,ifYearNew:a.formValidateModel1.val6,ifYearRevise:a.formValidateModel1.val7,ifReport:a.formValidateModel1.val8,ifShow:a.formValidateModel1.val9,content:a.formValidateModel1.val10,nextUser:a.formValidateModel1.nextUser,attachId:a.formValidateModel1.attachId,id:a.modifyid};l=o()(l),a.axios.post("/process/infInternalControl/updateInfInternalControl",l,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.buttonDisabled=!1,a.modal1=!1,a.taskPeipleModel=!1,a.tableList())}).catch(function(e){a.buttonDisabled=!1})}})},datechange2:function(e){this.formValidateModel1.val2=e},datechange3:function(e){this.formValidateModel1.val3=e},pageSizeChange:function(e){this.pageSize=1*e,this.tableList()},pageChangeFun:function(e){this.pageNum=1*e,this.tableList()},selectTreeCleanUp:function(e){for(var a=0;a<e.length;a++)e[a].children&&e[a].children.length>0?this.selectTreeCleanUp(e[a].children):this.$delete(e[a],"children")},datechange:function(e){this.minEnabledTime=e[0],this.maxEnabledTime=e[1]},tableList:function(){var e=this,a={title:this.formValidate.val1,enabledTime:this.formValidate.value2,creator:this.formValidate.val2,ifReport:this.formValidate.val3,flag:this.formValidate.val4,ifShow:this.formValidate.val5,manager:this.formValidate.val6,ifExacte:this.ifExacte,minEnabledTime:this.minEnabledTime,maxEnabledTime:this.maxEnabledTime,pageNum:this.pageNum,pageSize:this.pageSize};a=o()(a),this.axios.post("/process/infInternalControl/infInternalControlList",a,{headers:{"Content-Type":"application/json"}}).then(function(a){"200"==a.code&&(e.tableBody=a.data.records,e.total=a.data.total)}).catch(function(e){})},delItem:function(e,a){var t=this;"1"==a||"4"==a||"7"==a?this.$Message.info("此状态不能操作"):"6"==a||"3"==a?this.$Message.info("此状态不能操作"):this.$Modal.confirm({title:"是否删除？",okText:"确认",cancelText:"取消",onOk:function(){t.handleSubmitLast2(e)},onCancel:function(){}})},addfun:function(e,a,t,l){var i=this;if(this.appendbusId=a,this.appendId="","addFlag"==e)this.buttonVal="下一步",this.formValidateModel1.val9=!0,this.modal1=!0,this.fileId=!this.fileId,this.addFlagShow=!1,this.modifyFlagShow=!1,this.addFlag=!1,this.dataObj={data:[],showFlag:!0,disabled:!1};else if("modifyFlag"==e)"1"==l||"4"==l||"7"==l?this.$Message.info("此状态不允许操作"):(this.buttonVal="下一步",this.modal1=!0,this.addFlagShow=!1,this.modifyFlagShow=!0,this.addFlag=!1,this.modifyid=t,this.axios.post("/process/infInternalControl/getEntityRow/"+t).then(function(e){"200"==e.code&&(i.formValidateModel1.attachId=e.data.attachId,i.formValidateModel1.bpmTitle=e.data.bpmTitle,i.formValidateModel1.val1=e.data.title,i.formValidateModel1.val2=e.data.enabledTime,i.formValidateModel1.val3=e.data.diabledTime,i.formValidateModel1.val4=e.data.creator,i.formValidateModel1.val5=e.data.fileNum,i.formValidateModel1.val6=e.data.ifYearNew,i.formValidateModel1.val7=e.data.ifYearRevise,i.formValidateModel1.val8=e.data.ifReport,i.formValidateModel1.val9=JSON.parse(e.data.ifShow),i.formValidateModel1.val10=e.data.content,i.dataObj={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},i.fileId=e.data.busId)}).catch(function(e){}));else if("appendFlag"==e){this.buttonVal="保存",this.modal1=!0,this.addFlagShow=!0,this.addFlag=!0,this.modifyFlagShow=!0,this.axios.post("/process/infInternalControl/getEntityRow/"+t).then(function(e){"200"==e.code&&(i.formValidateModel1.attachId=e.data.attachId,i.formValidateModel1.bpmTitle=e.data.bpmTitle,i.formValidateModel1.val1=e.data.title,i.formValidateModel1.val2=e.data.enabledTime,i.formValidateModel1.val3=e.data.diabledTime,i.formValidateModel1.val4=e.data.creator,i.formValidateModel1.val5=e.data.fileNum,i.formValidateModel1.val6=e.data.ifYearNew,i.formValidateModel1.val7=e.data.ifYearRevise,i.formValidateModel1.val8=e.data.ifReport,i.formValidateModel1.val9=JSON.parse(e.data.ifShow),i.formValidateModel1.val10=e.data.content,i.dataObj={data:e.data,showFlag:!0,disabled:!0,worfFlow:!0},i.fileId=e.data.busId)}).catch(function(e){});var s={relationBusId:a};s=o()(s),this.axios.post("/process/infProcessAppend/getInfProcessAppendRows",s,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(i.appendId=e.data.id,i.formValidateModel1.val11=e.data.content,i.dataObj2={data:e.data,showFlag:!0,disabled:!1,worfFlow:!0},i.fileId2=e.data.busId)}).catch(function(e){})}},updateNextUser:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.formValidateModel1.nextUser="",e.forEach(function(e){1==e.checked&&(t.formValidateModel1.nextUser=e.code)}),this.$refs.formValidateModel1.validateField("nextUser")},updateNextUser2:function(e,a){var t=this;e.forEach(function(e){e.nodeKey!=a.nodeKey&&(e.checked=!1)}),this.taskPeipleModelData2.nextUser="",e.forEach(function(e){1==e.checked&&(t.taskPeipleModelData2.nextUser=e.code)}),this.$refs.taskPeipleModelData2.validateField("nextUser")},save1:function(e){var a=this;this.$refs[e].validate(function(e){if(e)if(1==a.addFlagShow&&1==a.addFlag&&1==a.modifyFlagShow){var t={id:a.appendId,relationBusId:a.appendbusId,content:a.formValidateModel1.val11,attachId:a.formValidateModel1.appendAttachId,busId:a.busId};t=o()(t),a.axios.post("/process/infProcessAppend/updateInfProcessAppend",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.$Message.info("保存成功"),a.modal1=!1)}).catch(function(e){})}else a.axios.get("/bpm/getNodeDefDetail?bpmType=process").then(function(e){a.bpmName=e.data[1].bpmName;var t={bpmName:e.data[1].bpmName,nodeId:e.data[1].nodeId,roleName:e.data[1].roleName,bpmType:"process"};t=o()(t),a.axios.post("/bpm/getNextRole",t,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.data2=e.data,a.treeNLeafNodeDisable(a.data2),a.taskPeipleModel=!0)}).catch(function(e){})}).catch(function(e){}),a.taskPeipleModel=!0})},rolefun:function(){},handleSubmit:function(e,a){var t=this;this.$refs[e].validate(function(e){e&&(t.ifExacte=a,t.pageNum=1,t.tableList())})}}}),v={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"operate-task-log"},[t("div",{staticClass:"topTitle"},[t("span",{staticClass:"topTitle-span1"},[e._v("过程管理")]),e._v(" "),e._m(0),e._v(" "),t("span",{staticClass:"topTitle-span1"},[e._v("过程内容")]),e._v(" "),e._m(1),e._v(" "),t("span",{staticClass:"topTitle-span1"},[e._v("内控制度")]),e._v(" "),t("div",{staticClass:"button-content"},[e.firstLoginFlag?t("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001002001001"},expression:"{menuCode:'108001002001001'}"}],attrs:{type:"primary"},on:{click:function(a){return e.addfun("addFlag")}}},[t("i",{staticClass:"ivu-icon ivu-icon-md-add"}),e._v("新增\n      ")]):e._e(),e._v(" "),e.firstLoginFlag?t("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001002001004"},expression:"{menuCode:'108001002001004'}"}],attrs:{type:"primary"},on:{click:e.exportFn}},[t("i",{staticClass:"ivu-icon ivu-icon-md-arrow-up"}),e._v("导出\n      ")]):e._e()],1)]),e._v(" "),t("div",{staticClass:"contentCellBox"},[t("div",{staticClass:"contentCellBox"},[e._m(2),e._v(" "),t("div",{staticClass:"contentCellBody1"},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":120,inline:""}},[t("Row",[t("FormItem",{attrs:{label:"制度全称：",prop:""}},[t("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.formValidate.val1,callback:function(a){e.$set(e.formValidate,"val1",a)},expression:"formValidate.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度实施时间："}},[t("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.formValidate.value2,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":e.datechange}})],1),e._v(" "),t("FormItem",{attrs:{label:"制定单位："}},[t("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.formValidate.val2,callback:function(a){e.$set(e.formValidate,"val2",a)},expression:"formValidate.val2"}})],1)],1),e._v(" "),t("Row",[t("FormItem",{attrs:{label:"是否报备："}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:e.formValidate.val3,callback:function(a){e.$set(e.formValidate,"val3",a)},expression:"formValidate.val3"}},[t("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),t("Option",{attrs:{value:"true"}},[e._v("是")]),e._v(" "),t("Option",{attrs:{value:"false"}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"状态：",prop:"extraUnit"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:e.formValidate.val4,callback:function(a){e.$set(e.formValidate,"val4",a)},expression:"formValidate.val4"}},[t("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),e._l(e.PROCESS_CHECK_STATE,function(a,l){return t("Option",{key:l,attrs:{value:a.code}},[e._v(e._s(a.name))])})],2)],1),e._v(" "),t("FormItem",{attrs:{label:"信息是否公开：",prop:"extraUnit"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},model:{value:e.formValidate.val5,callback:function(a){e.$set(e.formValidate,"val5",a)},expression:"formValidate.val5"}},[t("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),t("Option",{attrs:{value:"true"}},[e._v("是")]),e._v(" "),t("Option",{attrs:{value:"false"}},[e._v("否")])],1)],1)],1),e._v(" "),t("Row",[t("FormItem",{attrs:{label:"管理部门：",prop:"extraUnit"}},[t("treeselect",{staticStyle:{width:"200px"},attrs:{valueConsistsOf:"ALL",limit:3,multiple:!0,options:e.data1,placeholder:"请选择","max-height":100},model:{value:e.formValidate.val6,callback:function(a){e.$set(e.formValidate,"val6",a)},expression:"formValidate.val6"}})],1)],1),e._v(" "),t("Row",[t("div",{staticClass:"btnClass"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formValidate","0")}}},[e._v("查询")]),e._v(" "),t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formValidate","1")}}},[e._v("精确查询")])],1)])],1)],1)]),e._v(" "),t("div",{staticClass:"contentCellBox"},[e._m(3),e._v(" "),t("div",{staticClass:"contentCellBody"},[t("Row",[t("table",{staticClass:"tableBox"},[t("thead",[t("tr",e._l(e.tableHeader,function(a,l){return t("td",[e._v(e._s(a.name))])}),0)]),e._v(" "),t("tbody",e._l(e.tableBody,function(a,l){return t("tr",[t("td",[e._v(e._s(e.pageSize*(e.pageNum-1)+l+1))]),e._v(" "),t("td",{staticStyle:{width:"100px"}},[e.firstLoginFlag?t("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001002001002"},expression:"{menuCode:'108001002001002'}"}],staticClass:"spanBox",on:{click:function(t){return e.addfun("modifyFlag",a.busId,a.id,a.extraCode)}}},[e._v("修改")]):e._e(),e._v(" "),e.firstLoginFlag?t("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001002001003"},expression:"{menuCode:'108001002001003'}"}],staticClass:"spanBox",on:{click:function(t){return e.delItem(a.id,a.extraCode)}}},[e._v("删除")]):e._e(),e._v(" "),e.firstLoginFlag?t("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"108001002001007"},expression:"{menuCode:'108001002001007'}"}],staticClass:"spanBox",on:{click:function(t){return e.addfun("appendFlag",a.busId,a.id,a.flag)}}},[e._v("追加")]):e._e()]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:a.title}},[t("span",{staticClass:"spanBox textMaxWidth disBlock textOverflow",attrs:{slot:"reference"},on:{click:function(t){return e.watchTableCellFun(a,a.busId,a.id)}},slot:"reference"},[e._v(e._s(a.title))])])],1),e._v(" "),t("td",[e._v(e._s(a.enabledTime))]),e._v(" "),t("td",[e._v(e._s(a.diabledTime))]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.creator}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.creator))])])],1),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.fileNum}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.fileNum))])])],1),e._v(" "),t("td",[e._v(e._s("true"==a.ifYearNew?"是":"否"))]),e._v(" "),t("td",[e._v(e._s("true"==a.ifYearRevise?"是":"否"))]),e._v(" "),t("td",[e._v(e._s("true"==a.ifReport?"是":"否"))]),e._v(" "),t("td",{staticClass:"spanBox",on:{click:function(t){return e.showProcess(a)}}},[e._v(e._s(a.flag))]),e._v(" "),t("td",[e._v(e._s("true"==a.ifShow?"是":"否"))]),e._v(" "),t("td",{staticClass:"spanBox",on:{click:function(t){return e.watchFileFun(a.busId,a.id,a)}}},[e._v("查看")]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.manager}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.manager))])])],1),e._v(" "),t("td",{staticClass:"spanBox",on:{click:function(t){return e.watchAppendFun(a,a.busId,a.id)}}},[e._v("查看")]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.pubTime}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.pubTime))])])],1),e._v(" "),t("td",[e._v(e._s(a.pubUser))]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.updateTime}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.updateTime))])])],1),e._v(" "),t("td",[e._v(e._s(a.updater))])])}),0)])])],1),e._v(" "),t("div",{staticClass:"flexCenter pageBox"},[t("Page",{attrs:{total:e.total,current:e.pageNum,"show-elevator":"","show-sizer":""},on:{"update:current":function(a){e.pageNum=a},"on-change":e.pageChangeFun,"on-page-size-change":e.pageSizeChange}})],1)])]),e._v(" "),t("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,width:"1000",title:"设置"},model:{value:e.modal1,callback:function(a){e.modal1=a},expression:"modal1"}},[t("div",{staticClass:"modelSonDiv",staticStyle:{height:"400px","overflow-y":"auto"}},[t("Form",{ref:"formValidateModel1",attrs:{model:e.formValidateModel1,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{attrs:{label:"流程标题",prop:"bpmTitle"}},[t("Input",{attrs:{placeholder:"新增/修改/调整XX制度的流程",disabled:this.addFlag},model:{value:e.formValidateModel1.bpmTitle,callback:function(a){e.$set(e.formValidateModel1,"bpmTitle",a)},expression:"formValidateModel1.bpmTitle"}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度全称",prop:"val1"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val1,callback:function(a){e.$set(e.formValidateModel1,"val1",a)},expression:"formValidateModel1.val1"}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度实施时间",prop:"val2"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",value:e.formValidateModel1.val2,placeholder:"请输入时间",disabled:this.addFlag},on:{"on-change":e.datechange2}})],1),e._v(" "),t("FormItem",{attrs:{label:"制度失效时间",prop:"val3"}},[t("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请输入时间",value:e.formValidateModel1.val3,disabled:this.addFlag},on:{"on-change":e.datechange3}})],1),e._v(" "),t("FormItem",{attrs:{label:"制定单位",prop:"val4"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val4,callback:function(a){e.$set(e.formValidateModel1,"val4",a)},expression:"formValidateModel1.val4"}})],1),e._v(" "),t("FormItem",{attrs:{label:"相关文号",prop:"val5"}},[t("Input",{attrs:{placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val5,callback:function(a){e.$set(e.formValidateModel1,"val5",a)},expression:"formValidateModel1.val5"}})],1),e._v(" "),t("FormItem",{attrs:{label:"是否年内新建",prop:"val6"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val6,callback:function(a){e.$set(e.formValidateModel1,"val6",a)},expression:"formValidateModel1.val6"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否年内修订",prop:"val7"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val7,callback:function(a){e.$set(e.formValidateModel1,"val7",a)},expression:"formValidateModel1.val7"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否报备",prop:"val8"}},[t("RadioGroup",{model:{value:e.formValidateModel1.val8,callback:function(a){e.$set(e.formValidateModel1,"val8",a)},expression:"formValidateModel1.val8"}},[t("Radio",{attrs:{label:"true",disabled:this.addFlag}},[e._v("是")]),e._v(" "),t("Radio",{attrs:{label:"false",disabled:this.addFlag}},[e._v("否")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"是否公开",prop:""}},[t("i-switch",{attrs:{size:"large",disabled:this.addFlag},model:{value:e.formValidateModel1.val9,callback:function(a){e.$set(e.formValidateModel1,"val9",a)},expression:"formValidateModel1.val9"}},[t("span",{attrs:{slot:"true"},slot:"true"},[e._v("On")]),e._v(" "),t("span",{attrs:{slot:"false"},slot:"false"},[e._v("Off")])])],1),e._v(" "),t("FormItem",{attrs:{label:"编辑内容",prop:"val10"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入",disabled:this.addFlag},model:{value:e.formValidateModel1.val10,callback:function(a){e.$set(e.formValidateModel1,"val10",a)},expression:"formValidateModel1.val10"}})],1),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId,attrs:{"file-obj":e.dataObj},on:{requestUploadList:e.receiveUploadList}})],1),e._v(" "),e.addFlagShow?t("Row",[t("Row",{staticStyle:{"text-again":"left","border-bottom":"1px dashed #E8EAEC","margin-bottom":"20px"}},[e._v("追加信息")]),e._v(" "),t("FormItem",{attrs:{label:"上传附件"}},[t("showUsualFiles",{key:e.fileId2,attrs:{"file-obj":e.dataObj2},on:{requestUploadList:e.receiveUploadList2}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入"},model:{value:e.formValidateModel1.val11,callback:function(a){e.$set(e.formValidateModel1,"val11",a)},expression:"formValidateModel1.val11"}})],1)],1):e._e(),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel,callback:function(a){e.taskPeipleModel=a},expression:"taskPeipleModel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser}})],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:"",disabled:e.buttonDisabled},on:{click:function(a){return e.handleSubmitLast("formValidateModel1")}}},[e._v("立即申请")])],1)])],1)],1),e._v(" "),t("div",{staticClass:"flexCenter",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"button-content"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.save1("formValidateModel1")}}},[e._v(e._s(e.buttonVal))]),e._v(" "),t("Button",{on:{click:function(a){e.modal1=!1}}},[e._v("取消")])],1)])]),e._v(" "),t("Modal",{attrs:{"mask-closable":!1,width:"90%",title:"查看"},model:{value:e.watchFileModel,callback:function(a){e.watchFileModel=a},expression:"watchFileModel"}},[t("showUsualFiles",{key:e.fileId3,attrs:{"file-obj":e.dataObj3},on:{requestUploadList:e.receiveUploadList3}})],1),e._v(" "),t("Modal",{attrs:{"mask-closable":!1,width:"90%",title:"查看"},model:{value:e.watchTableCellDitalModel,callback:function(a){e.watchTableCellDitalModel=a},expression:"watchTableCellDitalModel"}},[t("div",{staticClass:"content"},[t("Form",{attrs:{"label-width":120}},[t("FormItem",{attrs:{label:"流程标题："}},[t("label",[e._v(e._s(e.watchTableCell.bpmTitle))])]),e._v(" "),t("FormItem",{attrs:{label:"制度全称："}},[t("label",[e._v(e._s(e.watchTableCell.val1))])]),e._v(" "),t("FormItem",{attrs:{label:"制度实施时间："}},[t("label",[e._v(e._s(e.watchTableCell.val2))])]),e._v(" "),t("FormItem",{attrs:{label:"制度失效时间："}},[t("label",[e._v(e._s(e.watchTableCell.val3))])]),e._v(" "),t("FormItem",{attrs:{label:"制定单位："}},[t("label",[e._v(e._s(e.watchTableCell.val4))])]),e._v(" "),t("FormItem",{attrs:{label:"相关文号："}},[t("label",[e._v(e._s(e.watchTableCell.val5))])]),e._v(" "),t("FormItem",{attrs:{label:"是否年内新建："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val6?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否年内修订："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val7?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否报备："}},[t("label",[e._v(e._s("true"==e.watchTableCell.val8?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"是否公开"}},[t("label",[e._v(e._s("true"==e.watchTableCell.val9?"是":"否"))])]),e._v(" "),t("FormItem",{attrs:{label:"编辑内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val10}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val10))])])],1)]),e._v(" "),t("FormItem",{attrs:{label:"附件："}},[t("showUsualFiles",{key:e.fileId4,attrs:{"file-obj":e.dataObj4},on:{requestUploadList:e.receiveUploadList4}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加附件："}},[t("showUsualFiles",{key:e.fileId5,attrs:{"file-obj":e.dataObj5},on:{requestUploadList:e.receiveUploadList5}})],1),e._v(" "),t("FormItem",{attrs:{label:"追加内容："}},[t("label",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.watchTableCell.val11}},[t("p",{staticClass:"textMaxWidth2 textOverflow",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.watchTableCell.val11))])])],1)])],1)],1)]),e._v(" "),t("Modal",{attrs:{"mask-closable":!1,width:"99%",title:"查看"},model:{value:e.watchAppenModel,callback:function(a){e.watchAppenModel=a},expression:"watchAppenModel"}},[t("div",{staticClass:"content"},[t("Row",[t("table",{staticClass:"tableBox"},[t("thead",[t("tr",e._l(e.tableHeaderAppend,function(a,l){return t("td",[e._v(e._s(a.name))])}),0)]),e._v(" "),t("tbody",e._l(e.tableBodyAppend,function(a,l){return t("tr",[t("td",[e._v(e._s(l+1))]),e._v(" "),t("td",[t("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:a.content}},[t("p",{staticClass:"textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.content))])])],1),e._v(" "),t("td",{staticClass:"spanBox",on:{click:function(t){return e.watchAppenModelAppendFile(a.busId)}}},[e._v("查看")]),e._v(" "),t("td",[e._v(e._s(a.dept))]),e._v(" "),t("td",[e._v(e._s(a.createTime))]),e._v(" "),t("td",[e._v(e._s(a.creator))])])}),0)])])],1)]),e._v(" "),t("Modal",{attrs:{"mask-closable":!1,width:"80%",title:"查看"},model:{value:e.watchAppenModelAppendFileModel,callback:function(a){e.watchAppenModelAppendFileModel=a},expression:"watchAppenModelAppendFileModel"}},[t("showUsualFiles",{key:e.fileId6,attrs:{"file-obj":e.dataObj6},on:{requestUploadList:e.receiveUploadList6}})],1),e._v(" "),t("Modal",{staticClass:"treeBoxModel",attrs:{"mask-closable":!1,width:"360"},model:{value:e.taskPeipleModel2,callback:function(a){e.taskPeipleModel2=a},expression:"taskPeipleModel2"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("span",[e._v("审核人信息")])]),e._v(" "),t("div",{staticStyle:{"text-align":"left","overflow-y":"auto",height:"300px"}},[t("Form",{ref:"taskPeipleModelData2",attrs:{model:e.taskPeipleModelData2,rules:e.ruleValidate2}},[t("FormItem",{attrs:{prop:"nextUser","label-width":10}},[t("Tree",{ref:"treeRef2",attrs:{data:e.data2,"show-checkbox":"",multiple:""},on:{"on-check-change":e.updateNextUser2}})],1)],1)],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(a){return e.handleSubmitLast2("taskPeipleModelData2")}}},[e._v("立即申请")])],1)]),e._v(" "),t("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:"流程详情",width:"80%"},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[e.showModal?t("processMessage",{attrs:{"data-obj":e.dataObj}}):e._e(),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("span",{staticClass:"topTitle-span1"},[a("img",{attrs:{src:t("Dh6M"),alt:""}})])},function(){var e=this.$createElement,a=this._self._c||e;return a("span",{staticClass:"topTitle-span1"},[a("img",{attrs:{src:t("Dh6M"),alt:""}})])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),this._v("查询条件\n      ")])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),this._v("数据列表\n      ")])}]};var m=t("C7Lr")(p,v,!1,function(e){t("eOBK")},"data-v-31c90846",null);a.default=m.exports},eOBK:function(e,a){}});
//# sourceMappingURL=106.e66ec7331637abb11ca31577069638620.js.map