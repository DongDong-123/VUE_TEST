webpackJsonp([21],{AZbk:function(e,t){},sCp2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={props:["dataObj"],data:function(){return{formValidate:{type:"",code:"",name:"",remark:"",supCode:"",id:""},ruleValidate:{type:[{required:!0,message:"类别不能为空！",trigger:"blur"}],code:[{required:!0,message:"代码不能为空！",trigger:"blur"}],name:[{required:!1,message:"名称不能为空！",trigger:"blur"}],remark:[{required:!1,type:"string",max:512,message:"描述不能超过512个字！",trigger:"blur"}],supCode:[{required:!1,message:"父码不能为空！",trigger:"blur"}]}}},created:function(){if("2"==this.dataObj.type){var e=this.dataObj.data;e&&e.id&&this.getInfInfoRow(e)}},methods:{handleSubmit:function(e){var t=this;console.log(this.formValidate),this.$refs[e].validate(function(e){e&&("1"==t.dataObj.type?t.axios.post("/system/common/add",t.formValidate,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.$emit("save"),t.$Message.success("保存成功！"))}).catch(function(e){}):t.axios.post("/system/common/update",t.formValidate,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(t.$Message.success("修改成功！"),t.$emit("save"))}).catch(function(e){}))})},handleCancel:function(e){this.$emit("cancel",!1)},getInfInfoRow:function(e){this.formValidate={type:e.type,code:e.code,name:e.name,remark:e.remark,supCode:e.supCode,id:e.id}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-ver-type"},[a("Form",{ref:"formValidate",staticClass:"form-content",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"类别：",prop:"type"}},[a("Input",{attrs:{placeholder:"请输入类别"},model:{value:e.formValidate.type,callback:function(t){e.$set(e.formValidate,"type",t)},expression:"formValidate.type"}})],1),e._v(" "),a("FormItem",{attrs:{label:"代码：",prop:"code"}},[a("Input",{attrs:{placeholder:"请输入代码"},model:{value:e.formValidate.code,callback:function(t){e.$set(e.formValidate,"code",t)},expression:"formValidate.code"}})],1),e._v(" "),a("FormItem",{attrs:{label:"名称：",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入名称"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"描述：",prop:"remark"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入描述"},model:{value:e.formValidate.remark,callback:function(t){e.$set(e.formValidate,"remark",t)},expression:"formValidate.remark"}})],1),e._v(" "),a("FormItem",{attrs:{label:"父码：",prop:"supCode"}},[a("Input",{attrs:{placeholder:"请输入父码"},model:{value:e.formValidate.supCode,callback:function(t){e.$set(e.formValidate,"supCode",t)},expression:"formValidate.supCode"}})],1),e._v(" "),a("FormItem",[a("div",{staticClass:"button-content"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),a("Button",{on:{click:e.handleCancel}},[e._v("取消")])],1)])],1)],1)},staticRenderFns:[]};var n={components:{addVerCode:a("C7Lr")(o,s,!1,function(e){a("AZbk")},null,null).exports},data:function(){return{keyId:"",showModal:!1,dataObj:{type:"1",data:[]},modelTitle:"新增",pageSize:10,pageNum:1,rowCount:0,currentpage:1,tableHeader:[{name:"序"},{name:"操作"},{name:"类别"},{name:"代码"},{name:"名称"},{name:"描述"},{name:"父码"}],tableBody:[],formValidate:{code:"",name:"",type:""},ruleValidate:{Inputvalue1:[{required:!1,message:"",trigger:"blur"}],Inputvalue2:[{required:!1,message:"",trigger:"blur"}]}}},created:function(){this.handleSubmit(0,1)},methods:{handleSubmit:function(e,t){var a=this,o={code:this.formValidate.code.trim(),name:this.formValidate.name.trim(),type:this.formValidate.type.trim(),ifExacte:e};this.axios.post("/system/common/listSearch/"+t+"/"+this.pageSize,o,{headers:{"Content-Type":"application/json"}}).then(function(e){"200"==e.code&&(a.tableBody=e.data.records,a.rowCount=e.data.total)}).catch(function(e){})},pageSizefun:function(e){this.pageSize=1*e,this.handleSubmit(0,1)},pageChange:function(e){this.pageNum=e,this.handleSubmit(0,e)},deleteItem:function(e){var t=this;console.log("item",e),e.id&&this.axios.post("/system/common/delete/"+e.id,{headers:{"Content-Type":"application/json"}}).then(function(e){t.$Message.success("删除成功！"),t.handleSubmit(0,1),t.currentpage=1,t.pageNum=1}).catch(function(e){console.log(e)})},operate:function(e,t){var a=this;switch(console.log("item",t),e){case"1":this.keyId=!this.keyId,this.modelTitle="新增",this.showModal=!0,this.dataObj={type:1,data:[],showFlag:!0};break;case"2":this.keyId=t.id,this.modelTitle="修改",this.dataObj={type:2,data:t},this.showModal=!0;break;case"3":this.$Modal.confirm({title:"是否删除？",okText:"确认",cancelText:"取消",onOk:function(){a.deleteItem(t)},onCancel:function(){}})}},saveDatas:function(){this.showModal=!1,this.pageNum=1,this.currentpage=1,this.handleSubmit(0,1)},cancelDialog:function(e){this.showModal=e,this.cancel()},cancel:function(){this.$refs.dialogModal.$refs.formValidate&&this.$refs.dialogModal.$refs.formValidate.resetFields()}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ver-code"},[e._m(0),e._v(" "),a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellBox"},[a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),e._v("查询条件\n        "),a("div",{staticClass:"button-content"},[a("Button",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"112004004001"},expression:"{menuCode:'112004004001'}"}],attrs:{type:"primary"},on:{click:function(t){return e.operate("1")}}},[a("i",{staticClass:"ivu-icon ivu-icon-md-add"}),e._v("新增\n          ")])],1)]),e._v(" "),a("div",{staticClass:"contentCellBody"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":120,inline:""}},[a("Row",[a("FormItem",{attrs:{label:"类别：",prop:"type"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入类别"},model:{value:e.formValidate.type,callback:function(t){e.$set(e.formValidate,"type",t)},expression:"formValidate.type"}})],1),e._v(" "),a("FormItem",{attrs:{label:"代码：",prop:"code"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入代码"},model:{value:e.formValidate.code,callback:function(t){e.$set(e.formValidate,"code",t)},expression:"formValidate.code"}})],1),e._v(" "),a("FormItem",{attrs:{label:"名称：",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1)],1),e._v(" "),a("Row",[a("div",{staticClass:"btnClass"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit(0,1)}}},[e._v("查询")])],1)])],1)],1)]),e._v(" "),a("div",{staticClass:"contentCellBox"},[e._m(1),e._v(" "),a("div",{staticClass:"contentCellBody"},[a("Row",[a("table",{staticClass:"tableBox"},[a("thead",[a("tr",e._l(e.tableHeader,function(t,o){return a("td",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("tbody",e._l(e.tableBody,function(t,o){return a("tr",[a("td",[e._v(e._s(e.pageSize*(e.pageNum-1)+o+1))]),e._v(" "),a("td",[a("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"112004004002"},expression:"{menuCode:'112004004002'}"}],staticClass:"spanBox",on:{click:function(a){return e.operate("2",t)}}},[e._v("修改")]),e._v(" "),a("span",{directives:[{name:"authcontrol",rawName:"v-authcontrol",value:{menuCode:"112004004003"},expression:"{menuCode:'112004004003'}"}],staticClass:"spanBox",on:{click:function(a){return e.operate("3",t)}}},[e._v("删除")])]),e._v(" "),a("td",[e._v(e._s(t.type))]),e._v(" "),a("td",[e._v(e._s(t.code))]),e._v(" "),a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",[a("el-popover",{attrs:{placement:"top-start",title:"",width:"500",trigger:"hover",content:t.remark}},[a("span",{staticClass:"disBlock textOverflow textMaxWidth",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.remark))])])],1),e._v(" "),a("td",[e._v(e._s(t.supCode))])])}),0)])])],1)]),e._v(" "),a("div",{staticClass:"flexCenter pageBox"},[a("Page",{attrs:{total:e.rowCount,"page-size":e.pageSize,current:e.currentpage,"show-elevator":"","show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizefun,"update:current":function(t){e.currentpage=t}}})],1)]),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:e.modelTitle,styles:{width:"60%"}},on:{"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("addVerCode",{key:e.keyId,ref:"dialogModal",attrs:{dataObj:e.dataObj,width:"80%"},on:{cancel:e.cancelDialog,save:e.saveDatas}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"topTitle"},[t("span",{staticClass:"topTitle-span1"},[this._v("系统管理")]),this._v(" "),t("span",{staticClass:"topTitle-span1"},[t("img",{attrs:{src:a("Dh6M"),alt:""}})]),this._v(" "),t("span",{staticClass:"topTitle-span1"},[this._v("基础设置")]),this._v(" "),t("span",{staticClass:"topTitle-span1"},[t("img",{attrs:{src:a("Dh6M"),alt:""}})]),this._v(" "),t("span",{staticClass:"topTitle-span1"},[this._v("通用代码")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"contentCellTitle"},[t("div",{staticClass:"contentCellTitle-1"}),this._v("数据列表\n      ")])}]};var l=a("C7Lr")(n,i,!1,function(e){a("vyhm")},null,null);t.default=l.exports},vyhm:function(e,t){}});
//# sourceMappingURL=21.000a8bebd708818d708e1577069638620.js.map