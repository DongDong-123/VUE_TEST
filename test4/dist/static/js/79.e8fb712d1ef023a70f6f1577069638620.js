webpackJsonp([79],{k3M7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),n=a("vdvI"),l=a("ldMV"),o=a("fYFQ"),r=a.n(o),c=(a("Kmkn"),{components:{Treeselect:r.a,processMessage:n.a,assessDetail:l.a},created:function(){var e=this;this.tablePage(),this.axios.post("/system/unit/getExtractUnit").then(function(t){"200"==t.code&&(e.selectTreeCleanUp(t.data),e.data1=t.data)}).catch(function(e){}),this.axios.get("/system/getDic/EVAL_STA,BUS_TYPE,ADJ_STA",{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(t.data.BUS_TYPE.forEach(function(e){e.checked=!1}),e.businessTypes=t.data.BUS_TYPE,e.adj=t.data.ADJ_STA,e.eval=t.data.EVAL_STA)}).catch(function(e){}),this.axios.post("/risk/busi/getRiskLevel",{headers:{"Content-Type":"application/json"}}).then(function(t){"200"==t.code&&(e.riskLevel=t.data)}).catch(function(e){})},data:function(){return{dataObjj:"",showModal:!1,modal1:!1,fileList:[],modelTitle:"",percent:"80%",tabview:"",evalDate:"",evalDate2:"",adjDate:"",adjDate2:"",riskLevel:[],businessTypes:[],eval:[],adj:[],searchFlag:"0",rowCount:100,pageSize:20,pageNub:1,tabname:"name1",data1:[],tableHeader:[{name:"序"},{name:"业务部门"},{name:"业务代码"},{name:"业务名称"},{name:"业务类型"},{name:"创建时间"},{name:"评估类型"},{name:"综合评分"},{name:"系统评估等级"},{name:"评估日期"},{name:"评估人员"},{name:"洗钱风险等级"},{name:"评估备注"},{name:"评估附件"},{name:"评估审核状态"},{name:"调整审核状态"},{name:"调整等级"},{name:"调整日期"},{name:"调整人员"},{name:"调整事由说明"},{name:"调整附件"},{name:"状态"},{name:"流程详情"}],tableBody:[],formValidate:{busiScope:"",formname:"",value2:[],value3:[],formname3:"",formname2:"",formname4:"",formname5:"",busType:[],extraUnit:[]},ruleValidate:{busiScope:[{required:!1,message:"请选择业务",trigger:"change"}],formname:[{required:!1,message:"请输入",trigger:"blur"}],permissionTime:[{required:!1,message:"请选择时间",trigger:"change"}],permissionTime1:[{required:!1,message:"请选择时间",trigger:"change"}],permissionTime3:[{required:!1,message:"请选择时间",trigger:"change"}],permissionTime4:[{required:!1,message:"请选择时间",trigger:"change"}],formname3:[{required:!1,message:"请选择时间",trigger:"change"}]}}},methods:{watchdetaile:function(e,t,a){this.dataObjj={type:e,evalBusinessId:t,adjBusinessId:a},this.tabview="processMessage",this.modelTitle="流程信息",this.showModal=!0,this.percent="80%"},cancel:function(){},watchFiles:function(e){var t=this;this.fileList=[],e&&this.axios.post("/system/remote/getFileList/"+e).then(function(e){"200"==e.code&&(t.fileList=e.data)}).catch(function(e){}),this.modal1=!0},fileDownload:function(e,t){var a=this,s=i()({token:"",fileId:e});this.axios.post("/system/remote/micDownLoad",s,{headers:{"Content-Type":"application/json"}}).then(function(e){var s=i()({url:e.message,fileName:t});a.axios.post("/system/remote/getFileInfo",s,{headers:{"Content-Type":"application/json"},responseType:"blob"}).then(function(e){a.download(e,t)}).catch(function(e){})}).catch(function(e){})},download:function(e,t){if(e){var a=window.URL.createObjectURL(new Blob([e])),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click()}},value2fun:function(e){this.formValidate.value2=e,this.formValidate.value2.length>0&&(this.evalDate=this.formValidate.value2[0],this.evalDate1=this.formValidate.value2[1])},value3fun:function(e){this.formValidate.value3=e,this.formValidate.value3.length>0&&(this.adjDate=this.formValidate.value3[0],this.adjDate1=this.formValidate.value3[1])},tablePage:function(){var e=this,t={pageNum:this.pageNub,pageSize:this.pageSize,flag:this.searchFlag,department:this.formValidate.extraUnit,busName:this.formValidate.formname,evalDate:this.evalDate,evalDate1:this.evalDate1,adjDate:this.adjDate,adjDate1:this.adjDate1,sysLevel:this.formValidate.formname2,riskLevel:this.formValidate.formname3,evalStatu:this.formValidate.formname4,adjStatu:this.formValidate.formname5,busType:this.formValidate.busType};t=i()(t),this.axios.post("/risk/busi/busRiskEvalHisRecord",t,{headers:{"Content-Type":"application/json"}}).then(function(t){e.rowCount=t.data.total,e.tableBody=t.data.records}).catch(function(e){})},selectTreeCleanUp:function(e){for(var t=0;t<e.length;t++)e[t].children&&e[t].children.length>0?this.selectTreeCleanUp(e[t].children):this.$delete(e[t],"children")},pageSizefun:function(e){this.pageSize=e,this.tablePage()},assessDetail:function(e,t,a,s,i){this.dataObjj={busId:e,newBusId:t,type:a,evalBusinessId:s,adjBusinessId:i},this.tabview="assessDetail",this.modelTitle="评估详情",this.showModal=!0,this.percent="80%"},changeSts:function(e,t){this.businessTypes[e].checked=!this.businessTypes[e].checked;var a=[];this.businessTypes.forEach(function(e){e.checked&&a.push(e.code)}),this.formValidate.busType=a},verifyDetail:function(){this.$router.push({name:"taskAuditDataExtractionApplyDetail",query:{tabname:"name1"}})},flowDetail:function(){this.$router.push({name:"taskAuditDataExtractionApplyDetail",query:{tabname:"name2"}})},handleSubmit:function(e,t){var a=this;this.$refs[e].validate(function(e){e&&(a.searchFlag=t,a.pageNub=1,a.tablePage())})},resetRequest:function(e){},pageChange:function(e){this.pageNub=e,this.tablePage()}}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bussiness-records"},[e._m(0),e._v(" "),a("div",{staticClass:"content2"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":120,inline:""}},[a("Row",[a("FormItem",{attrs:{label:"业务部门:",prop:"busiScope"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{valueConsistsOf:"ALL",limit:3,multiple:!0,options:e.data1,placeholder:"请选择","max-height":100},model:{value:e.formValidate.extraUnit,callback:function(t){e.$set(e.formValidate,"extraUnit",t)},expression:"formValidate.extraUnit"}})],1),e._v(" "),a("FormItem",{attrs:{label:"业务名称:",prop:""}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.formValidate.formname,callback:function(t){e.$set(e.formValidate,"formname",t)},expression:"formValidate.formname"}})],1),e._v(" "),a("FormItem",{attrs:{label:"评估日期:",prop:"xxxx"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.formValidate.value2,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"请选择时间"},on:{"on-change":e.value2fun}})],1),e._v(" "),a("FormItem",{attrs:{label:"调整日期:",prop:"xxxx"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.formValidate.value3,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-start",placeholder:"请选择时间"},on:{"on-change":e.value3fun}})],1),e._v(" "),a("FormItem",{attrs:{label:"系统评估等级:",prop:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务"},model:{value:e.formValidate.formname2,callback:function(t){e.$set(e.formValidate,"formname2",t)},expression:"formValidate.formname2"}},[a("Option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.riskLevel,function(t){return a("Option",{key:t.levelCode,attrs:{value:t.levelCode}},[e._v(e._s(t.levelName))])})],2)],1),e._v(" "),a("FormItem",{attrs:{label:"洗钱风险等级:",prop:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务"},model:{value:e.formValidate.formname3,callback:function(t){e.$set(e.formValidate,"formname3",t)},expression:"formValidate.formname3"}},[a("Option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.riskLevel,function(t){return a("Option",{key:t.levelCode,attrs:{value:t.levelCode}},[e._v(e._s(t.levelName))])})],2)],1),e._v(" "),a("FormItem",{attrs:{label:"评估审核状态:",prop:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务"},model:{value:e.formValidate.formname4,callback:function(t){e.$set(e.formValidate,"formname4",t)},expression:"formValidate.formname4"}},[a("Option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.eval,function(t){return a("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])}),e._v("n\n          ")],2)],1),e._v(" "),a("FormItem",{attrs:{label:"调整审核状态:",prop:""}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择业务"},model:{value:e.formValidate.formname5,callback:function(t){e.$set(e.formValidate,"formname5",t)},expression:"formValidate.formname5"}},[a("Option",{attrs:{value:""}},[e._v("未选择")]),e._v(" "),e._l(e.adj,function(t){return a("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])}),e._v("n\n          ")],2)],1)],1),e._v(" "),a("Row",[a("FormItem",{attrs:{label:"业务类型:",prop:""}},[a("div",{staticClass:"header-wrapper"},e._l(e.businessTypes,function(t,s){return a("Tag",{key:s,attrs:{checkable:"",checked:t.checked},nativeOn:{click:function(a){return e.changeSts(s,t.checked)}}},[e._v(e._s(t.name))])}),1)])],1),e._v(" "),a("Row",[a("div",{staticClass:"btnClass"},[a("Button",{staticStyle:{width:"89px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate",0)}}},[e._v("查询")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate",1)}}},[e._v("精确查询")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"contentCellBody"},[a("Row",[a("div",{staticClass:"content1"},[a("div",{staticClass:"contentCellTitle"},[a("div",{staticClass:"contentCellTitle-1"}),e._v("数据列表\n        ")])])]),e._v(" "),a("Row",[a("table",{staticClass:"tableBox"},[a("thead",[a("tr",e._l(e.tableHeader,function(t,s){return a("td",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("tbody",e._l(e.tableBody,function(t,s){return a("tr",[a("td",[e._v(e._s(e.pageSize*(e.pageNub-1)+s+1))]),e._v(" "),a("td",[e._v(e._s(t.department))]),e._v(" "),a("td",[e._v(e._s(t.busCode))]),e._v(" "),a("td",[a("span",{staticClass:"spanBox",on:{click:function(a){return e.assessDetail(t.busId,t.newBusId,t.type,t.evalBusinessId,t.adjBusinessId)}}},[e._v(e._s(t.busName))])]),e._v(" "),a("td",[e._v(e._s(t.busType))]),e._v(" "),a("td",[e._v(e._s(t.createTime?t.createTime.substr(0,10):""))]),e._v(" "),a("td",[e._v(e._s(t.type))]),e._v(" "),a("td",[e._v(e._s(t.totalScore))]),e._v(" "),a("td",[e._v(e._s(t.sysLevel))]),e._v(" "),a("td",[e._v(e._s(t.evalDate?t.evalDate.substr(0,10):""))]),e._v(" "),a("td",[e._v(e._s(t.evalUpdater))]),e._v(" "),a("td",[e._v(e._s(t.riskLevel))]),e._v(" "),a("td",{staticClass:"textOverflow textmaxwidth",attrs:{title:t.evalRemark}},[e._v(e._s(t.evalRemark))]),e._v(" "),a("td",{staticClass:"spanBox",on:{click:function(a){return e.watchFiles(t.evalBusinessId)}}},[e._v("查看")]),e._v(" "),a("td",[e._v(e._s(t.evalStatus))]),e._v(" "),a("td",[e._v(e._s(t.adjStatus))]),e._v(" "),a("td",[e._v(e._s(t.adjustLevel))]),e._v(" "),a("td",[e._v(e._s(t.adjTime?t.adjTime.substr(0,10):""))]),e._v(" "),a("td",[e._v(e._s(t.adjCreator))]),e._v(" "),a("td",{staticClass:"textOverflow textmaxwidth",attrs:{title:t.causeDetail}},[e._v(e._s(t.causeDetail))]),e._v(" "),a("td",{staticClass:"spanBox",on:{click:function(a){return e.watchFiles(t.adjBusinessId)}}},[e._v("查看")]),e._v(" "),a("td",[e._v(e._s(t.flag))]),e._v(" "),a("td",{staticClass:"spanBox",on:{click:function(a){return e.watchdetaile(t.type,t.evalBusinessId,t.adjBusinessId)}}},[e._v("查看详情")])])}),0)])])],1),e._v(" "),a("div",{staticClass:"flexCenter pageBox"},[a("Page",{attrs:{total:e.rowCount,current:e.pageNub,"page-size":e.pageSize,"show-elevator":"","show-sizer":""},on:{"update:current":function(t){e.pageNub=t},"on-change":e.pageChange,"on-page-size-change":e.pageSizefun}})],1),e._v(" "),a("Modal",{staticClass:"dialog",attrs:{"mask-closable":!1,title:e.modelTitle,styles:{width:e.percent}},on:{"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[e.showModal?a(e.tabview,{tag:"component",attrs:{"data-objj":e.dataObjj}}):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),a("Modal",{attrs:{"mask-closable":!1,title:"文件列表"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("div",{staticClass:"fujian"},[a("div",{staticClass:"fujian-title"},[e._v("附件:")]),e._v(" "),e._l(e.fileList,function(t,s){return a("div",{key:s},[a("span",{staticClass:"cursorPointer",staticStyle:{width:"100%",height:"40px","line-height":"20px",overflow:"hidden","text-overflow":"ellipsis","margin-bottom":"5px"},on:{click:function(a){return e.fileDownload(t.fileId,t.filename)}}},[e._v(e._s(t.filename))])])})],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topTitle"},[s("span",{staticClass:"topTitle-span1"},[e._v("洗钱风险评估")]),e._v(" "),s("span",{staticClass:"topTitle-span1"},[s("img",{attrs:{src:a("Dh6M"),alt:""}})]),e._v(" "),s("span",{staticClass:"topTitle-span1"},[e._v("业务洗钱风险评估")]),e._v(" "),s("span",{staticClass:"topTitle-span1"},[s("img",{attrs:{src:a("Dh6M"),alt:""}})]),e._v(" "),s("span",{staticClass:"topTitle-span1"},[e._v("洗钱风险评估记录")]),e._v(" "),s("div",{staticClass:"button-content"})])}]};var m=a("C7Lr")(c,d,!1,function(e){a("pUkb")},"data-v-62ecda55",null);t.default=m.exports},pUkb:function(e,t){}});
//# sourceMappingURL=79.e8fb712d1ef023a70f6f1577069638620.js.map